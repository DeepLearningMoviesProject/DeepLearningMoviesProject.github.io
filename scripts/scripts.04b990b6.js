"use strict";angular.module("frontMoviesDeepLearningApp",["ngAnimate","ngAria","ngCookies","ngResource","ngRoute","ngSanitize","ngMaterial","imagesLoaded","cl.paging","chart.js","ngStorage","ngMessages","satellizer"]).config(["$routeProvider",function(a){var b=["$q","$auth","$location","$rootScope",function(a,b,c,d){var e=a.defer();return b.isAuthenticated()?(console.log("Already authenticated, redirect to main page",e),e.reject(),c.path("/home")):e.resolve(),e.promise}],c=["$q","$location","$auth",function(a,b,c){var d=a.defer();return c.isAuthenticated()?d.resolve():b.path("/login"),d.promise}];a.when("/home",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main",resolve:{loginRequired:c}}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/improveAccuracy",{templateUrl:"views/improveaccuracy.html",controller:"ImproveaccuracyCtrl",controllerAs:"improveAccuracy",resolve:{loginRequired:c}}).when("/annotatedMovies",{templateUrl:"views/annotatedmovies.html",controller:"AnnotatedmoviesCtrl",controllerAs:"annotatedMovies",resolve:{loginRequired:c}}).when("/stats",{templateUrl:"views/stats.html",controller:"StatsCtrl",controllerAs:"stats",resolve:{loginRequired:c}}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login",resolve:{skipIfLoggedIn:b}}).when("/recommendations",{templateUrl:"views/recommendations.html",controller:"RecommendationsCtrl",controllerAs:"recommendations",resolve:{loginRequired:c}}).when("/signup",{templateUrl:"views/signup.html",controller:"SignupCtrl",controllerAs:"signup",resolve:{skipIfLoggedIn:b}}).when("/settings",{templateUrl:"views/settings.html",controller:"SettingsCtrl",controllerAs:"settings",resolve:{loginRequired:c}}).when("/credits",{templateUrl:"views/credits.html",controller:"CreditsCtrl",controllerAs:"credits"}).when("/",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"home",resolve:{skipIfLoggedIn:b}}).otherwise({redirectTo:"/"})}]).config(["$localStorageProvider",function(a){a.setKeyPrefix("deepMovies")}]).config(["$authProvider",function(a){a.baseUrl="http://ec2-52-42-51-249.us-west-2.compute.amazonaws.com:80",a.loginUrl="/auth/login",a.signupUrl="/auth/signup"}]).config(["$mdDateLocaleProvider",function(a){a.months=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],a.shortMonths=["janv","févr","mars","avr","mai","juin","juil","août","sept","oct","nov","déc"],a.days=["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],a.shortDays=["Di","Lu","Ma","Me","Je","Ve","Sa"],a.firstDayOfWeek=1,a.formatDate=function(a){var b=moment(a);return b.isValid()?b.format("DD/MM/YYYY"):""}}]).run(["$rootScope","$window","$auth",function(a,b,c){a.auth=c}]).config(["$httpProvider",function(a){a.defaults.headers.common={},a.defaults.headers.post={},a.defaults.headers.put={},a.defaults.headers.patch={},a.defaults.headers.get={},a.interceptors.push(function(){return{request:function(a){return a.url.startsWith("https://raw.githubusercontent.com")&&delete a.headers.Authorization,a}}})}]).config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["**"])}]).config(["$mdThemingProvider",function(a){var b=a.extendPalette("light-blue",{contrastDefaultColor:"light",contrastDarkColors:["50"],50:"ffffff"});a.definePalette("customBlue",b),a.theme("default").primaryPalette("teal").accentPalette("amber"),a.theme("greenTheme").primaryPalette("green"),a.theme("blueTheme").primaryPalette("blue"),a.theme("redTheme").primaryPalette("red"),a.theme("input","default").primaryPalette("grey"),a.alwaysWatchTheme(!0)}]).config(["$mdIconProvider",function(a){a.iconSet("action","material-design-icons/sprites/svg-sprite/svg-sprite-action.svg",24).iconSet("home","material-design-icons/sprites/svg-sprite/svg-sprite-home.svg",24).iconSet("alert","material-design-icons/sprites/svg-sprite/svg-sprite-alert.svg",24).iconSet("av","material-design-icons/sprites/svg-sprite/svg-sprite-av.svg",24).iconSet("communication","material-design-icons/sprites/svg-sprite/svg-sprite-communication.svg",24).iconSet("content","material-design-icons/sprites/svg-sprite/svg-sprite-content.svg",24).iconSet("device","material-design-icons/sprites/svg-sprite/svg-sprite-device.svg",24).iconSet("editor","material-design-icons/sprites/svg-sprite/svg-sprite-editor.svg",24).iconSet("file","material-design-icons/sprites/svg-sprite/svg-sprite-file.svg",24).iconSet("hardware","material-design-icons/sprites/svg-sprite/svg-sprite-hardware.svg",24).iconSet("image","material-design-icons/sprites/svg-sprite/svg-sprite-image.svg",24).iconSet("maps","material-design-icons/sprites/svg-sprite/svg-sprite-maps.svg",24).iconSet("navigation","material-design-icons/sprites/svg-sprite/svg-sprite-navigation.svg",24).iconSet("notification","material-design-icons/sprites/svg-sprite/svg-sprite-notification.svg",24).iconSet("social","material-design-icons/sprites/svg-sprite/svg-sprite-social.svg",24).iconSet("toggle","material-design-icons/sprites/svg-sprite/svg-sprite-toggle.svg",24).iconSet("avatars","https://raw.githubusercontent.com/angular/material/master/docs/app/icons/avatar-icons.svg",24).defaultIconSet("material-design-icons/sprites/svg-sprite/svg-sprite-action.svg",24)}]),angular.module("frontMoviesDeepLearningApp").controller("MainCtrl",["$rootScope","$scope",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],b.uploadFiles=function(){var c=document.getElementById("preferences").files;if(console.log(c),c.length<=0)return!1;var d=new FileReader;d.onload=function(c){var d=JSON.parse(c.target.result);a.moviesEvaluation=b.objToStrMap(d),console.log(a.moviesEvaluation)},d.readAsText(c.item(0))},b.saveToPc=function(a,c){if(!a)return void console.error("No data");c||(c="download.json"),a=b.strMapToJson(a);var d=new Blob([a],{type:"text/json"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(d,c);else{var e=document.createEvent("MouseEvents"),f=document.createElement("a");f.download=c,f.href=window.URL.createObjectURL(d),f.dataset.downloadurl=["text/json",f.download,f.href].join(":"),e.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),f.dispatchEvent(e)}}}]),angular.module("frontMoviesDeepLearningApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("frontMoviesDeepLearningApp").controller("PrimaryCtrl",["$scope","$rootScope","$timeout","$mdSidenav","$mdDialog","$mdToast","$location","$auth","$http","$localStorage","GetAllMoviesFactory","TrainModelFactory","GetPredictionsFactory","MoviesDetailsFactory","SentimentAnalysisFactory","AddMovieFactory","UpdateMovieFactory","DeleteMovieFactory","GetUserInfoFactory","GetPredictionsFMFactory",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(a,b){a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(a){b.hide(a)}}b.moviesEvaluation=new Map,a.moviesCurrentlyUpdated=new Map,a.loadingBar=!1,a.loadingPredictionsFirstClassifier=!1,a.popularity={},j.allMoviesInfos||(j.allMoviesInfos={}),a.loadingBarToggle=function(){a.loadingBar=!a.loadingBar},a.hideLoadingBar=function(){a.loadingBar=!1},a.showLoadingBar=function(){a.loadingBar=!0},a.menu=[{link:"/home",title:"Accueil",icon:"action:ic_home_24px"},{link:"/annotatedMovies",title:"Mes films annotés",icon:"av:ic_movie_24px"},{link:"/stats",title:"Mes statistiques",icon:"editor:ic_insert_chart_24px"},{link:"/improveAccuracy",title:"Améliorer mes prédictions",icon:"action:ic_thumbs_up_down_24px"},{link:"/recommendations",title:"Mes recommandations",icon:"action:ic_thumb_up_24px"}],a.completeCountries=[],i.get("resources/completeCountries.json").success(function(b){a.completeCountries=b}).error(function(){console.log("could not find someFile.json")}),a.go=function(b){g.path()===b?a.hideLoadingBar():g.path(b)},a.log=function(a){console.log(a)},a.toggleSidenav=function(a){d(a).toggle()},a.logoutFunction=function(){h.isAuthenticated()&&h.logout().then(function(){console.log("You have been logged out"),b.moviesEvaluation=new Map,a.moviesCurrentlyUpdated=new Map,a.loadingBar=!1,a.loadingPredictionsFirstClassifier=!1,a.popularity={},b.userInfo={},g.path("/login")})},a.strMapToObj=function(a){var b=Object.create(null);return a.forEach(function(a,c){b[c]=a}),b},a.objToStrMap=function(a){var b=new Map;return Object.keys(a).forEach(function(c){b.set(c,a[c])}),b},a.strMapToJson=function(b){return JSON.stringify(a.strMapToObj(b))},a.getAllMoviesFromDB=function(){console.log("getAllMoviesFromDB"),a.showLoadingBar(),k.getAllMovies(function(c){return a.hideLoadingBar(),b.moviesEvaluation=a.objToStrMap(c.movies),console.log(b.moviesEvaluation),c},function(b){a.hideLoadingBar(),a.showErrorToast(),console.log("Get movies failed",b)})},a.getUserInfoFromDB=function(){console.log("getUserInfoFromDB"),s.getUserInfo(function(a){return b.userInfo={},b.userInfo.name=a.name,b.userInfo.email=a.email,console.log(b.userInfo),a},function(b){a.showErrorToast(),console.log("Get userInfo failed",b)})},a.getPredictionsFromBack=function(){console.log("Start predicting movies"),a.showLoadingBar(),a.loadingPredictionsFirstClassifier=!0,m.getPredictions(function(c){if(b.predictions=c,console.log(b.predictions),c.length>0){var d=c.map(function(a){return a.id.toString()});console.log(d),a.sentimentAnalysis(d)}return a.hideLoadingBar(),a.loadingPredictionsFirstClassifier=!1,a.showPredictionsToast(),c},function(){console.log("Get predictions failed"),a.loadingPredictionsFirstClassifier=!1})},a.getPredictionsFMFromBack=function(){console.log("Start predicting FM movies"),a.showLoadingBar(),a.loadingPredictionsFM=!0,t.getPredictionsFM(function(c){return b.predictionsFM=c,delete b.predictionsFM.$promise,delete b.predictionsFM.$resolved,console.log(b.predictionsFM),a.hideLoadingBar(),c},function(){console.log("Get predictions FM failed")})},a.evaluateMovies=function(c,d){b.moviesEvaluation.get(c.toString())===d?a.deleteMovieToDB({id:c}):b.moviesEvaluation.has(c.toString())?a.updateMovieToDB({id:c,liked:d}):a.addMovieToDB({id:c,liked:d})},a.trainModel=function(){a.showLoadingBar(),l.trainModel(function(b){b.$promise.then(function(b){return a.hideLoadingBar(),console.log(b),b},function(a){console.log("Model training failed",a)})})},a.sentimentAnalysis=function(b){a.showLoadingBar(),o.sentimentAnalysis({movies:b},function(b){b.$promise.then(function(b){return a.hideLoadingBar(),console.log(b),a.popularity=Object.assign(a.popularity,b),b},function(a){console.log("Sentiment Analysis failed",a)})})},a.countMovies=function(){var b={likedMovies:0,dislikedMovies:0};return a.moviesEvaluation.forEach(function(a){1===a?b.likedMovies++:b.dislikedMovies++}),b},a.showMovieDetailsDialog=function(b,c){a.movieDetails={},n.getMoviesDetailsById({id:c},function(c){c.$promise.then(function(c){return console.log(c),e.show({controller:u,templateUrl:"views/moviedetailsdialog.html",scope:a.$new(),targetEvent:b,clickOutsideToClose:!0}).then(function(){console.log("Show movie details done !")},function(){console.log("Movie details dialog closed !")}),a.movieDetails=c,c})})},a.showPredictionsToast=function(){var b=f.simple().textContent("Vos prédictions sont disponibles !").action("Voir mes prédictions").highlightAction(!0).hideDelay(1e4).position("top right");f.show(b).then(function(b){"ok"===b&&a.go("/recommendations")})},a.showErrorToast=function(){var a=f.simple().textContent("Un problème est survenu, réessayer plus tard").action("Ok").highlightAction(!0).hideDelay(5e3).position("top right");f.show(a).then(function(a){"ok"===a&&console.log("You clicked 'OK'.")})},u.$inject=["$scope","$mdDialog"],a.addMovieToDB=function(d){a.moviesCurrentlyUpdated.set(d.id,d.liked),console.log(d),p.addMovie(d,function(d){console.log("Movie imported successfully!",d),a.moviesCurrentlyUpdated["delete"](d.id),c(function(){b.moviesEvaluation.set(d.id.toString(),d.liked)},10)},function(){console.log("Movie creation failed!"),a.moviesCurrentlyUpdated["delete"](d.id),console.log(a.moviesCurrentlyUpdated)})},a.updateMovieToDB=function(d){a.moviesCurrentlyUpdated.set(d.id,d.liked),console.log(d),q.updateMovie(d,function(d){console.log("Movie updated successfully!",d),a.moviesCurrentlyUpdated["delete"](d.id),c(function(){b.moviesEvaluation.set(d.id.toString(),d.liked)},10)},function(){console.log("Movie update failed!"),a.hideLoadingBar()})},a.deleteMovieToDB=function(d){a.moviesCurrentlyUpdated.set(d.id,d.liked),console.log(d),r.deleteMovie(d,function(d){console.log("Movie deleted successfully!",d),a.moviesCurrentlyUpdated["delete"](d.id),c(function(){b.moviesEvaluation["delete"](d.id.toString())},10)},function(){console.log("Movie deletion failed!"),a.hideLoadingBar()})},h.isAuthenticated()&&(console.log("Logged in, retrieve userInfo & movies"),a.getUserInfoFromDB(),a.getAllMoviesFromDB())}]),angular.module("frontMoviesDeepLearningApp").controller("ImproveaccuracyCtrl",["$rootScope","$scope","$mdDialog","$timeout","SearchMoviesFactory","DiscoverMoviesFactory","MoviesDetailsFactory",function(a,b,c,d,e,f,g){b.showLoadingBar(),b.movieDetails={},b.globalPage=0,b.firstLoad=!1,b.searchMovieByName=function(a){return a?(b.showLoadingBar(),void e.getMoviesByName({query:a},function(a){a.$promise.then(function(a){return b.moviesSearched=a,console.log(b.moviesSearched),a})})):void b.hideLoadingBar()},b.discoverMovies=function(a){b.showLoadingBar();var c=1;null==a?(c=Math.floor(1e3*Math.random())+1,b.globalPage=0):c=b.globalPage+a<1?1:b.globalPage+a>1e3?1e3:b.globalPage+=a,console.log(c),f.getDiscoveredMoviesByName({page:c},function(a){a.$promise.then(function(a){return b.moviesSearched=a,console.log(b.moviesSearched),a})})},b.discoverMovies(1),b.$on("SUCCESS",function(){console.log("ALL PICTURES LOADED SUCCESSFULLY")}),b.$on("FAIL",function(){console.log("ALL PICTURES LOADED WITH ATLEAST ONE FAILED")}),b.$on("ALWAYS",function(){b.hideLoadingBar(),b.firstLoad=!0,console.log("ALL DONE ALWAYS")}),b.getMovieDetails=function(a){g.getMoviesDetailsById({id:a},function(a){a.$promise.then(function(a){return a})})}}]),angular.module("frontMoviesDeepLearningApp").factory("DiscoverMoviesFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.discover.movies,{},{getDiscoveredMoviesByName:{method:"JSONP",params:{api_key:"ff3f07bf3577a496a2f813488eb29980",sort_by:"popularity.desc","vote_count.gte":"1",language:"fr-FR",page:"@page",callback:"JSON_CALLBACK"},headers:{"Content-Type":"application/json"}}})}]).factory("SearchMoviesFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.search.movies,{},{getMoviesByName:{method:"JSONP",params:{api_key:"ff3f07bf3577a496a2f813488eb29980",language:"fr-FR",query:"@query",callback:"JSON_CALLBACK"},headers:{"Content-Type":"application/json"}}})}]).factory("MoviesDetailsFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.movies.getDetails,{id:"@id"},{getMoviesDetailsById:{method:"JSONP",params:{api_key:"ff3f07bf3577a496a2f813488eb29980",language:"fr-FR",callback:"JSON_CALLBACK"},headers:{"Content-Type":"application/json"}}})}]).factory("TestIdFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.users.testId,{},{getTestId:{method:"GET",headers:{"Content-Type":"application/json"}}})}]),angular.module("frontMoviesDeepLearningApp").service("WebServices",["Environments",function(a){var b=this,c=["movies","search","discover"],d={movies:{getDetails:"/movie/:id",getCredits:"/movie/:id/credits",getKeywords:"/movie/:id/keywords",getLatest:"/movie/latest",getPopular:"/movie/popular"},search:{movies:"/search/movie",keywords:"/search/keyword",multi:"/search/multi"},discover:{movies:"/discover/movie"},login:{login:"/login",logout:"/logout",signup:"/signup"},deepMovies:{updateMovies:"/api/updateMovies",getLikedMovies:"/api/likedMovies/liked",getDisikedMovies:"/api/likedMovies/disliked",getAllMovies:"/api/likedMovies/all",updateMovie:"/api/likedMovie/:id/:liked",createMovie:"/api/likedMovie/:id/:liked",deleteMovie:"/api/likedMovie/:id",trainModel:"/api/train",getPredictions:"/api/prediction",getPredictionsFM:"/api/predictionFM",sentimentAnalysis:"/api/popularity",getUserInfo:"/api/user","delete":"/assignments/:id",projectDefault:"/assignments/projects/:id",projectFromWeek:"/assignments/projects/:id/:week,:year",firstLastProject:"/assignments/projects/:id/assignments?positions=first,last",lastProject:"/assignments/projects/:id/assignments?positions=last",collabDefault:"/assignments/collabs/:id",collabFromWeek:"/assignments/collabs/:id/:week,:year"},users:{add:"/users/add","delete":"/users/:id",list:"/users",user:"/user",testId:"/testId"}};this.getWebserviceGroup=function(){var b=a.getTMDBEnvironment(),e=a.getBackEndEnvironment(),f=angular.copy(d);for(var g in f)for(var h in f[g])c.includes(g)?f[g][h]=b+f[g][h]:f[g][h]=e+f[g][h];return f},this.webServicesGroup=b.getWebserviceGroup()}]),angular.module("frontMoviesDeepLearningApp").service("Environments",function(){var a="https://api.themoviedb.org/3",b="http://ec2-52-42-51-249.us-west-2.compute.amazonaws.com:80";this.getTMDBEnvironment=function(){return a},this.getBackEndEnvironment=function(){return b}}),angular.module("frontMoviesDeepLearningApp").controller("AnnotatedmoviesCtrl",["$rootScope","$scope","$localStorage","$timeout","MoviesDetailsFactory",function(a,b,c,d,e){var f=0;b.likedMovies=[],b.dislikedMovies=[],b.allMoviesTemp=[],b.allMovies=[],b.rangeIndex=14,b.$watch("moviesEvaluation",function(){b.moviesEvaluation&&(b.paging={total:Math.ceil(b.moviesEvaluation.size/b.rangeIndex),current:1})}),b.$on("SUCCESS",function(){b.hideLoadingBar()}),b.$on("FAIL",function(){console.log("ALL PICTURES LOADED WITH ATLEAST ONE FAILED")}),b.$on("ALWAYS",function(){b.hideLoadingBar()}),b.getMovieDetailsById=function(a){e.getMoviesDetailsById({id:a},function(d){return c.allMoviesInfos[a]=d,b.allMoviesTemp.push(d),0===b.moviesEvaluation.get(a)?b.dislikedMovies.push(d):1===b.moviesEvaluation.get(a)&&b.likedMovies.push(d),b.allMoviesTemp.length===f-(b.paging.current-1)*b.rangeIndex&&(console.log(b.allMoviesTemp),b.allMovies=b.allMoviesTemp.slice()),d},function(c){console.log(a),b.deleteMovieToDB({id:a}),console.log("Get movie details by id failed",c)})},b.getMovieDetailsByIdFromLS=function(a){var d=c.allMoviesInfos[a];return b.allMoviesTemp.push(d),0===b.moviesEvaluation.get(a)?b.dislikedMovies.push(d):1===b.moviesEvaluation.get(a)&&b.likedMovies.push(d),b.allMoviesTemp.length===f-(b.paging.current-1)*b.rangeIndex&&(b.allMovies=null,b.allMovies=b.allMoviesTemp.slice()),d},b.getNextMovies=function(a){b.$watch("moviesEvaluation",function(){if(b.moviesEvaluation){var e=0,g=Array.from(b.moviesEvaluation.keys()),h=a;h=a+b.rangeIndex>g.length?g.length:a+b.rangeIndex,0!==h&&b.showLoadingBar(),f=h,b.allMoviesTemp=[],b.allMovies=[];for(var i=a;h>i;i++)if(c.allMoviesInfos[g[i]])b.getMovieDetailsByIdFromLS(g[i]);else{var j=275*e;!function(a,c){d(function(){console.log("get movie id: "+c),b.getMovieDetailsById(a[c])},j)}(g,i),e++}}})},b.getAllMovies=function(a){var c=Array.from(b.moviesEvaluation.keys()),d=a;d=a+b.rangeIndex>c.length?c.length:a+b.rangeIndex;for(var e=a;d>e;e++)b.getMovieDetailsById(c[e]);d<c.length&&setTimeout(function(){b.getNextMovies(d)},11e3)},b.$watch("moviesEvaluation.size",function(){console.log("moviesEvaluation change detected"),b.allMoviesTemp.length>0&&b.allMoviesTemp.length===f-1-(b.paging.current-1)*b.rangeIndex&&b.getNextMovies((b.paging.current-1)*b.rangeIndex)})}]),function(){angular.module("imagesLoaded",[]).directive("imagesLoaded",["$timeout","$rootScope","$q",function(a,b,c){function d(b){a(b,0)}function e(a,b,c){this.loaded=void 0,this.loading=!0,c?this.__onload(b,!0):(this.node=new Image,this.bind(b),this.node.src=a)}function f(a){this.imagesCount=0,this.imagesLoaded=0,this.imagesFailed=0,this.useProgressEvents=a}var g={},h={progress:["QUARTER","HALF","THREEQUARTERS","FULL"],successful:"SUCCESS",complete:"FAIL",always:"ALWAYS"};return e.prototype={constructor:e,bind:function(a){var b=this;this.node.addEventListener("load",function(){b.__onload(a,!0)},!1),this.node.addEventListener("error",function(){b.__onload(a,!1)},!1)},__onload:function(a,b){this.loaded=!0,this.loading=!1,b&&this.node&&delete this.node,a(b)}},f.prototype={constructor:f,whenImagesLoaded:function(a){function b(a){var b;a?l.imagesLoaded++:l.imagesFailed++,l.useProgressEvents&&(b=(l.imagesLoaded+l.imagesFailed)/Math.ceil(k/4))&&b%1===0&&4>b&&d(function(){j.notify(h.progress[b-1])}),l.imagesLoaded+l.imagesFailed===l.imagesCount&&d(function(){j.notify(h.progress[3]),j.resolve(l.imagesFailed>0?h.complete:h.successful)})}function f(a){var c=a.src,d=g[c];d?d.loaded?b(!0):d.loading?d.bind(b):d.loaded===!1:a.complete&&a.naturalWidth>0?g[c]=new e(c,b,!0):g[c]=new e(c,b)}var i,j=c.defer(),k=a.length,l=this;this.imagesCount=k;for(var m=0;m<this.imagesCount;m++)i=a[m],f(i);return j.promise}},{restrict:"A",compile:function(a,b){return function(a,b,c){var e,g=(b[0].childNodes,"yes"===c.useProgressEvents?!0:!1),i=0,j=document.images;a.$watch(function(){return j.length},function(c,j){var k,l;c!==j&&(e=b.find("img"),k=e.length,k!==i&&(i=k,l=new f(g),d(function(){l.whenImagesLoaded(e).then(function(b){a.$emit(b),a.$emit(h.always)},function(a){},function(b){g&&a.$emit("PROGRESS",{status:b})})})))})}}}}])}(),angular.module("frontMoviesDeepLearningApp").controller("StatsCtrl",["$rootScope","$scope","$mdDialog","$timeout","$interval","$localStorage","SearchMoviesFactory","DiscoverMoviesFactory","MoviesDetailsFactory",function(a,b,c,d,e,f,g,h,i){function j(a){a.sort(function(a,b){return a-b});var b=Math.floor(a.length/2);return a.length%2?a[b]:(a[b-1]+a[b])/2}function k(){for(var a=0;a<b.genres.length;a++)b.genresStatsDisliked.set(b.genres[a].id,0),b.genresStatsLiked.set(b.genres[a].id,0)}function l(){for(var a=[],c=[],d=0;d<b.likedMovies.length;d++){b.loadingProcessing=d/(b.allMovies.length-1)*100,b.runtimeLikedStats.average+=b.likedMovies[d].runtime,b.runtimeLikedStats.runtimes.push(b.likedMovies[d].runtime),b.yearLikedStats.average+=parseInt(b.likedMovies[d].release_date),b.yearLikedStats.years.push(parseInt(b.likedMovies[d].release_date)),b.voteLikedStats.average+=b.likedMovies[d].vote_average,b.voteLikedStats.votes.push(b.likedMovies[d].vote_average);for(var e=0;e<b.likedMovies[d].genres.length;e++){var f=b.genresStatsLiked.get(b.likedMovies[d].genres[e].id)+1;b.genresStatsLiked.set(b.likedMovies[d].genres[e].id,f)}}for(var g=0;g<b.dislikedMovies.length;g++){b.loadingProcessing=(g+b.likedMovies.length)/(b.allMovies.length-1)*100,b.runtimeDislikedStats.average+=b.dislikedMovies[g].runtime,b.runtimeDislikedStats.runtimes.push(b.dislikedMovies[g].runtime),b.yearDislikedStats.average+=parseInt(b.dislikedMovies[g].release_date),b.yearDislikedStats.years.push(parseInt(b.dislikedMovies[g].release_date)),b.voteDislikedStats.average+=b.dislikedMovies[g].vote_average,b.voteDislikedStats.votes.push(b.dislikedMovies[g].vote_average);for(var h=0;h<b.dislikedMovies[g].genres.length;h++){var i=b.genresStatsDisliked.get(b.dislikedMovies[g].genres[h].id)+1;b.genresStatsDisliked.set(b.dislikedMovies[g].genres[h].id,i)}}for(var k=0;k<b.genres.length;k++)b.labelsBarGraph[k]=b.genres[k].name,a.push(b.genresStatsLiked.get(b.genres[k].id)/b.likedMovies.length*100),c.push(b.genresStatsDisliked.get(b.genres[k].id)/b.dislikedMovies.length*100);b.dataBarGraph.push(a,c),b.runtimeLikedStats.average=b.runtimeLikedStats.average/b.runtimeLikedStats.runtimes.length,b.runtimeDislikedStats.average=b.runtimeDislikedStats.average/b.runtimeDislikedStats.runtimes.length,b.runtimeLikedStats.median=j(b.runtimeLikedStats.runtimes),b.runtimeDislikedStats.median=j(b.runtimeDislikedStats.runtimes),b.yearLikedStats.average=b.yearLikedStats.average/b.yearLikedStats.years.length,b.yearDislikedStats.average=b.yearDislikedStats.average/b.yearDislikedStats.years.length,b.yearLikedStats.median=j(b.yearLikedStats.years),b.yearDislikedStats.median=j(b.yearDislikedStats.years),b.voteLikedStats.average=b.voteLikedStats.average/b.voteLikedStats.votes.length,b.voteDislikedStats.average=b.voteDislikedStats.average/b.voteDislikedStats.votes.length,b.voteLikedStats.median=j(b.voteLikedStats.votes),b.voteDislikedStats.median=j(b.voteDislikedStats.votes),b.statsAvailable=!0}b.likedMovies=[],b.dislikedMovies=[],b.allMoviesTemp=[],b.allMovies=[],b.stats={},b.genresStatsLiked=new Map,b.genresStatsDisliked=new Map,b.loadingTMDB=0,b.loadingProcessing=0,b.statsAvailable=!1,b.runtimeLikedStats={average:0,median:0,firstQuart:0,thirdQuart:0,runtimes:[]},b.runtimeDislikedStats={average:0,median:0,firstQuart:0,thirdQuart:0,runtimes:[]},b.yearLikedStats={average:0,median:0,firstQuart:0,thirdQuart:0,years:[]},b.yearDislikedStats={average:0,median:0,firstQuart:0,thirdQuart:0,years:[]},b.voteLikedStats={average:0,median:0,firstQuart:0,thirdQuart:0,votes:[]},b.voteDislikedStats={average:0,median:0,firstQuart:0,thirdQuart:0,votes:[]},b.rangeIndex=35,b.series=["👍","👎"],b.dataBarGraph=[],b.labelsBarGraph=[],b.genres=[{id:28,name:"Action"},{id:12,name:"Aventure"},{id:16,name:"Animation"},{id:35,name:"Comédie"},{id:80,name:"Crime"},{id:99,name:"Documentaire"},{id:18,name:"Drame"},{id:10751,name:"Familial"},{id:14,name:"Fantastique"},{id:36,name:"Histoire"},{id:27,name:"Horreur"},{id:10402,name:"Musique"},{id:9648,name:"Mystère"},{id:10749,name:"Romance"},{id:878,name:"Science-Fiction"},{id:10770,name:"Téléfilm"},{id:53,name:"Thriller"},{id:10752,name:"Guerre"},{id:37,name:"Western"},{id:10769,name:"Étranger"}],b.getMovieDetailsById=function(a){i.getMoviesDetailsById({id:a},function(c){return f.allMoviesInfos[a]=c,b.allMoviesTemp.push(c),0===b.moviesEvaluation.get(a)?b.dislikedMovies.push(c):1===b.moviesEvaluation.get(a)&&b.likedMovies.push(c),b.allMoviesTemp.length===b.moviesEvaluation.size&&(b.allMovies=b.allMoviesTemp.slice(),l()),c},function(c){console.log(a),b.deleteMovieToDB({id:a}),console.log("Get movie details by id failed",c)})},b.getMovieDetailsByIdFromLS=function(a){var c=f.allMoviesInfos[a];return b.allMoviesTemp.push(c),0===b.moviesEvaluation.get(a)?b.dislikedMovies.push(c):1===b.moviesEvaluation.get(a)&&b.likedMovies.push(c),c},b.getAllMovies2=function(a){var c=Array.from(b.moviesEvaluation.keys()),e=a,g=0;e=a+b.rangeIndex>c.length?c.length:a+b.rangeIndex;for(var h=a;e>h;h++)b.loadingTMDB=h/(b.moviesEvaluation.size-1)*100,f.allMoviesInfos[c[h]]?(b.getMovieDetailsByIdFromLS(c[h]),g++):b.getMovieDetailsById(c[h]);var i=11e3-250*g;console.log("temps attendu: ",i),console.log("temps gagné: ",250*g),e<c.length&&d(function(){b.getAllMovies(e)},i)},b.getAllMovies=function(){for(var a=Array.from(b.moviesEvaluation.keys()),c=0,e=0,g=0;g<a.length;g++)if(f.allMoviesInfos[a[g]])b.getMovieDetailsByIdFromLS(a[g]),e++,b.loadingTMDB=e/(b.moviesEvaluation.size-1)*100;else{var h=275*c;!function(a,c){d(function(){b.getMovieDetailsById(a[c]),e++,b.loadingTMDB=e/(b.moviesEvaluation.size-1)*100},h)}(a,g),c++}},k(),b.$watch("moviesEvaluation.size",function(){console.log("moviesEvaluation change detected"),!(b.moviesEvaluation.size>0)||b.allMoviesTemp.length&&b.allMovies.length||(console.log("Getallmovies"),b.getAllMovies()),b.allMoviesTemp.length>0&&b.allMoviesTemp.length===b.moviesEvaluation.size&&(console.log("All informations retrieved !"),b.allMovies=b.allMoviesTemp.slice(),l())})}]),angular.module("frontMoviesDeepLearningApp").controller("LoginCtrl",["$scope","$rootScope","$mdSidenav","$location","$auth",function(a,b,c,d,e){a.loginFunction=function(){console.log("login function"),e.login({name:a.user.name,password:a.user.password}).then(function(c){console.log("You have successfully signed in!"),console.log(c),b.userInfo={},b.userInfo.name=c.data.name,b.userInfo.email=c.data.email,b.moviesEvaluation=a.objToStrMap(c.data.movies),console.log("Movies imported successfully!",b.moviesEvaluation),d.path("/")})["catch"](function(a){console.log(a.data.message,a.status)})},a.authenticate=function(a){e.authenticate(a).then(function(){console.log("You have successfully signed in with "+a+"!"),d.path("/")})["catch"](function(a){a.message?console.log(a.message):a.data?console.log(a.data.message,a.status):console.log(a)})}}]),angular.module("frontMoviesDeepLearningApp").controller("RecommendationsCtrl",["$rootScope","$scope","$mdDialog","$timeout","$localStorage","SearchMoviesFactory","DiscoverMoviesFactory","MoviesDetailsFactory",function(a,b,c,d,e,f,g,h){!b.predictionsFM&&b.moviesEvaluation.size&&b.showLoadingBar(),b.movieDetails={},b.globalPage=0,b.firstLoad=!1,b.allMoviesTemp=[],b.allMovies=[],b.Math=window.Math,b.$on("SUCCESS",function(){console.log("ALL PICTURES LOADED SUCCESSFULLY")}),b.$on("FAIL",function(){console.log("ALL PICTURES LOADED WITH ATLEAST ONE FAILED")}),b.$on("ALWAYS",function(){b.hideLoadingBar(),b.firstLoad=!0,console.log("ALL DONE ALWAYS")}),b.getMovieDetailsById=function(c){h.getMoviesDetailsById({id:c},function(a){return e.allMoviesInfos[c]=a,b.allMoviesTemp.push(a),a},function(d){console.log(c),b.showErrorToast(),b.deleteMovieToDB({id:c}),delete a.predictionsFM[c],console.log("Get movie details by id failed",d)})},b.getMovieDetailsByIdFromLS=function(a){var c=e.allMoviesInfos[a];return b.allMoviesTemp.push(c),c},b.getMoviesInfosFromPredictionsIds=function(){var a=0;b.showLoadingBar();for(var c=Object.keys(b.predictionsFM),f=0;f<c.length;f++)if(e.allMoviesInfos[c[f]])b.getMovieDetailsByIdFromLS(c[f]);else{var g=275*a;!function(a,c){d(function(){b.getMovieDetailsById(a[c])},g)}(c,f),a++}},b.$watch("moviesEvaluation",function(){b.moviesEvaluation&&(b.loadingPredictionsFirstClassifier||b.predictions||!b.predictionsFM||console.log("PredictionsFM retrieved, preditions of first classifier can start !"),!b.predictionsFM&&b.moviesEvaluation.size&&(console.log("Start FM predictions"),b.getPredictionsFMFromBack()))}),b.$watch("predictionsFM",function(){console.log("predictionFM changed"),b.predictionsFM&&(console.log("getMoviesInfosFromPredictionsIds"),b.getMoviesInfosFromPredictionsIds()),b.loadingPredictionsFirstClassifier||b.predictions||!b.predictionsFM||(console.log("PredictionsFM retrieved, preditions of first classifier can start !"),b.getPredictionsFromBack()),b.predictionsFM&&angular.equals(b.popularity,{})&&b.sentimentAnalysis(Object.keys(b.predictionsFM))}),b.$watch("allMoviesTemp.length",function(){console.log("allMoviesTemp.length changed"),b.predictionsFM&&b.allMoviesTemp.length===Object.keys(b.predictionsFM).length&&(b.allMovies=b.allMoviesTemp.slice(),b.loadingPredictionsFM=!1,b.showPredictionsToast())})}]),angular.module("frontMoviesDeepLearningApp").controller("SignupCtrl",["$scope","$rootScope","$mdSidenav","$location","$auth","$http","FreeGeoIpFactory",function(a,b,c,d,e,f,g){a.user={},a.user.birthday=new Date("01/01/1990"),a.maxDate=new Date,a.signupFunction=function(){e.signup(a.user).then(function(a){e.setToken(a),b.userInfo={},b.userInfo.name=a.data.name,b.userInfo.email=a.data.email,d.path("/"),console.log("You have successfully created a new account and have been signed-in",a)})["catch"](function(a){console.log(a.data.message)})},a.getGeolocation=function(){g.getGeolocation(function(b){b.$promise.then(function(b){return console.log(b),a.userCountry=a.completeCountries.find(function(a){return a.cca2===b.country_code}),a.user.country=a.userCountry.translations.fra.common,b})})},a.getGeolocation(),a.occupations=["agriculteurs","artisan - commerçant - chef d'entreprise","autre","cadre","employé","étudiant","ouvrier","profession intermédiaire","retraité"],a.countries=["Afghanistan","Afrique du Sud","Ahvenanmaa","Albanie","Algérie","Allemagne","Andorre","Angola","Anguilla","Antarctique","Antigua-et-Barbuda","Arabie Saoudite","Argentine","Arménie","Aruba","Australie","Autriche","Azerbaïdjan","Bahamas","Bahreïn","Bangladesh","Barbade","Belgique","Belize","Bermudes","Bhoutan","Birmanie","Biélorussie","Bolivie","Bosnie-Herzégovine","Botswana","Brunei","Brésil","Bulgarie","Burkina Faso","Burundi","Bénin","Cambodge","Cameroun","Canada","Chili","Chine","Chypre","Cité du Vatican","Colombie","Comores","Congo","Congo (Rép. dém.)","Corée du Nord","Corée du Sud","Costa Rica","Croatie","Cuba","Curaçao","Côte d'Ivoire","Danemark","Djibouti","Dominique","Espagne","Estonie","Fidji","Finlande","France","Gabon","Gambie","Ghana","Gibraltar","Grenade","Groenland","Grèce","Guadeloupe","Guam","Guatemala","Guernesey","Guinée","Guinée équatoriale","Guinée-Bissau","Guyana","Guyane","Géorgie","Géorgie du Sud-et-les Îles Sandwich du Sud","Haïti","Honduras","Hong Kong","Hongrie","Inde","Indonésie","Irak","Iran","Irlande","Islande","Israël","Italie","Jamaïque","Japon","Jersey","Jordanie","Kazakhstan","Kenya","Kirghizistan","Kiribati","Kosovo","Koweït","Laos","Lesotho","Lettonie","Liban","Liberia","Libye","Liechtenstein","Lituanie","Luxembourg","Macao","Macédoine","Madagascar","Malaisie","Malawi","Maldives","Mali","Malte","Maroc","Martinique","Mauritanie","Mayotte","Mexique","Micronésie","Moldavie","Monaco","Mongolie","Montserrat","Monténégro","Mozambique","Namibie","Nauru","Nicaragua","Niger","Nigéria","Niue","Norvège","Nouvelle-Calédonie","Nouvelle-Zélande","Népal","Oman","Ouganda","Ouzbékistan","Pakistan","Palaos (Palau)","Palestine","Panama","Papouasie-Nouvelle-Guinée","Paraguay","Pays-Bas","Philippines","Pologne","Polynésie française","Porto Rico","Portugal","Pérou","Qatar","Roumanie","Royaume-Uni","Russie","Rwanda","République centrafricaine","République dominicaine","Réunion","Sahara Occidental","Saint-Barthélemy","Saint-Christophe-et-Niévès","Saint-Marin","Saint-Martin","Saint-Pierre-et-Miquelon","Saint-Vincent-et-les-Grenadines","Sainte-Lucie","Salvador","Samoa","Samoa américaines","Serbie","Seychelles","Sierra Leone","Singapour","Slovaquie","Slovénie","Somalie","Soudan","Soudan du Sud","Sri Lanka","Suisse","Surinam","Suède","Svalbard et Jan Mayen","Swaziland","Syrie","São Tomé et Príncipe","Sénégal","Tadjikistan","Tanzanie","Taïwan","Tchad","Tchéquie","Terres australes et antarctiques françaises","Territoire britannique de l'océan Indien","Thaïlande","Timor oriental","Togo","Tokelau","Tonga","Trinité-et-Tobago","Tunisie","Turkménistan","Turquie","Tuvalu","Ukraine","Uruguay","Vanuatu","Venezuela","Viêt Nam","Wallis-et-Futuna","Yémen","Zambie","Zimbabwe","Égypte","Émirats arabes unis","Équateur","Érythrée","États-Unis","Éthiopie","Île Bouvet","Île Christmas","Île Maurice","Île Norfolk","Île de Man","Îles Caïmans","Îles Cocos","Îles Cook","Îles Féroé","Îles Heard-et-MacDonald","Îles Malouines","Îles Mariannes du Nord","Îles Marshall","Îles Pitcairn","Îles Salomon","Îles Turques-et-Caïques","Îles Vierges britanniques","Îles Vierges des États-Unis","Îles du Cap-Vert","Îles mineures éloignées des États-Unis"];
}]),angular.module("frontMoviesDeepLearningApp").directive("passwordMatch",function(){return{require:"ngModel",scope:{otherModelValue:"=passwordMatch"},link:function(a,b,c,d){d.$validators.compareTo=function(b){return b===a.otherModelValue},a.$watch("otherModelValue",function(){d.$validate()})}}}),angular.module("frontMoviesDeepLearningApp").filter("capitalize",function(){return function(a){return a?a.charAt(0).toUpperCase()+a.substr(1).toLowerCase():""}}),angular.module("frontMoviesDeepLearningApp").filter("orderByWithAccent",function(){return function(a,b,c){var d=a.sort(function(a,c){return angular.isUndefined(b)?a.localeCompare(c):a[b].localeCompare(c[b])});return c?d.reverse():d}}),angular.module("frontMoviesDeepLearningApp").factory("FreeGeoIpFactory",["$resource",function(a){return a("http://freegeoip.net/json/",{},{getGeolocation:{method:"JSONP",params:{callback:"JSON_CALLBACK"},headers:{"Content-Type":"application/json"}}})}]),angular.module("frontMoviesDeepLearningApp").controller("SettingsCtrl",["$rootScope","$scope","UpdateAnnotatedMoviesFactory","$localStorage",function(a,b,c,d){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],b.uploadPreferencesToDB=function(){var a=document.getElementById("preferencesToDB").files;if(console.log(a),a.length<=0)return!1;var c=new FileReader;c.onload=function(a){var c=JSON.parse(a.target.result);b.updateAnnotatedMovies(c)},c.readAsText(a.item(0))},b.updateAnnotatedMovies=function(d){b.showLoadingBar(),console.log(d),c.updateAnnotatedMovies(d,function(c){a.moviesEvaluation=b.objToStrMap(c.movies),console.log("Movies imported successfully!",a.moviesEvaluation),b.hideLoadingBar()},function(){console.log("Movies update failed!"),b.hideLoadingBar()})},b.deleteLocalStorage=function(){delete d.allMoviesInfos,console.log(d.allMoviesInfos)}}]),angular.module("frontMoviesDeepLearningApp").factory("UpdateAnnotatedMoviesFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.deepMovies.updateMovies,{},{updateAnnotatedMovies:{method:"POST",headers:{"Content-Type":"application/json"}}})}]).factory("GetLikedMoviesFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.deepMovies.getLikedMovies,{},{getLikedMovies:{method:"GET",params:{},headers:{"Content-Type":"application/json"}}})}]).factory("GetDislikedMoviesFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.deepMovies.getDislikedMovies,{},{getDislikedMovies:{method:"GET",params:{},headers:{"Content-Type":"application/json"}}})}]).factory("GetUserInfoFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return console.log("GetUserInfoFactory"),a(d.deepMovies.getUserInfo,{},{getUserInfo:{method:"GET",params:{},headers:{"Content-Type":"application/json"}}})}]).factory("GetAllMoviesFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return console.log("GetAllMoviesFactory"),a(d.deepMovies.getAllMovies,{},{getAllMovies:{method:"GET",params:{},headers:{"Content-Type":"application/json"}}})}]).factory("AddMovieFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.deepMovies.createMovie,{id:"@id",liked:"@liked"},{addMovie:{method:"POST",params:{},headers:{"Content-Type":"application/json"}}})}]).factory("UpdateMovieFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.deepMovies.updateMovie,{id:"@id",liked:"@liked"},{updateMovie:{method:"PUT",params:{},headers:{"Content-Type":"application/json"}}})}]).factory("DeleteMovieFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.deepMovies.deleteMovie,{id:"@id"},{deleteMovie:{method:"DELETE",params:{},headers:{"Content-Type":"application/json"}}})}]).factory("TrainModelFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.deepMovies.trainModel,{},{trainModel:{method:"POST",params:{},headers:{"Content-Type":"application/json"}}})}]).factory("SentimentAnalysisFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.deepMovies.sentimentAnalysis,{},{sentimentAnalysis:{method:"POST",params:{},headers:{"Content-Type":"application/json"}}})}]).factory("GetPredictionsFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.deepMovies.getPredictions,{},{getPredictions:{method:"GET",params:{},headers:{"Content-Type":"application/json"},isArray:!0}})}]).factory("GetPredictionsFMFactory",["$resource","$rootScope","WebServices",function(a,b,c){var d=c.webServicesGroup;return a(d.deepMovies.getPredictionsFM,{},{getPredictionsFM:{method:"GET",params:{},headers:{"Content-Type":"application/json"}}})}]),angular.module("frontMoviesDeepLearningApp").controller("CreditsCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("frontMoviesDeepLearningApp").controller("HomeCtrl",["$rootScope","$scope","$mdDialog","$timeout","SearchMoviesFactory","DiscoverMoviesFactory",function(a,b,c,d,e,f){b.getPopularMovies=function(){f.getDiscoveredMoviesByName({page:1},function(a){a.$promise.then(function(a){return b.popularMovies=a,b.randomPopularMovie=a.results[Math.floor(20*Math.random())],console.log(b.popularMovies,b.randomPopularMovie),a})})},b.getPopularMovies()}]),angular.module("frontMoviesDeepLearningApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/annotatedmovies.html",'<div layout-fill layout="column"> <!-- Main toolbar --> <md-toolbar class="md-whiteframe-z1 slideTopToBottom"> <div class="md-toolbar-tools"> <!-- Hamburger icon --> <md-button class="md-icon-button" ng-click="toggleSidenav(\'left\')" hide-gt-md aria-label="Menu"> <md-icon md-svg-icon="navigation:ic_menu_24px" aria-label="Menu"></md-icon> </md-button> <h3> Mes films annotés </h3> <span flex></span> <!-- Search and menus icons --> <!-- <md-button class="md-icon-button" aria-label="Search" ng-click="toggleSearch()">\n        <md-icon md-svg-icon="action:ic_search_24px" aria-label="Search"></md-icon>\n      </md-button>\n      <md-button class="md-icon-button" aria-label="Open Settings" ng-click="showListBottomSheet($event)">\n        <md-icon md-svg-icon="navigation:ic_more_vert_24px" aria-label="More"></md-icon>\n      </md-button> --> </div> </md-toolbar> <!-- Content --> <md-content layout-padding> <md-tabs md-dynamic-height md-border-bottom> <md-tab> <md-tab-label href="#allmovies">Tous les films</md-tab-label> <md-tab-body class="md-padding"> <h1 class="md-display-2">Tous mes films</h1> <h2 ng-show="!moviesEvaluation.size && !loadingBar"> Vous n\'avez annoté aucun film, rendez-vous dans la catégorie "Améliorer mes prédictions" :) </h2> <cl-paging ng-show="moviesEvaluation.size > 0" flex cl-pages="paging.total" cl-steps="6" cl-page-changed="getNextMovies((paging.current-1)*rangeIndex)" cl-align="center center" cl-current-page="paging.current"></cl-paging> <!-- <div data-images-loaded ng-show="!loadingBar" class="searchedMoviesCardContainer animate-show-in" layout-wrap layout="row" layout-align="space-around center">\n			      <md-card class="searchedMoviesCard" ng-repeat="movie in allMovies | orderBy:\'popularity\':true">\n			        <img class="searchMoviesBackdropPath" ng-if="movie.backdrop_path" ng-src="https://image.tmdb.org/t/p/w780/{{movie.backdrop_path}}"/>\n			        <img class="searchMoviesBackdropPath" ng-if="!movie.backdrop_path" ng-src="https://www.youmagine.com/assets/placeholder-4232c9c79bc795997e7c7d4457b3725ee5f0fb55197114169a60a534105902fb.png"/>\n			        <md-card-actions layout="row" layout-align="start center">\n			          <div layout="column" flex="70">\n			            <span class="headline">{{movie.title}}</span>\n			            <span class="subline">{{movie.vote_average}} <span style="font-size: 16px">★</span></span>\n			          </div>\n			          <span flex></span>\n			          <md-button md-theme="blueTheme" flex="none" ng-click="evaluateMovies(movie.id, 1)" class="md-icon-button" aria-label="like" ng-class="moviesEvaluation.get(movie.id.toString()) === 1 ? \'md-primary\' : \'\'">\n			            <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon>\n			          </md-button>\n			          <md-button md-theme="redTheme" flex="none" ng-click="evaluateMovies(movie.id, 0)" class="md-icon-button" aria-label="dislike" ng-class="moviesEvaluation.get(movie.id.toString()) === 0 ? \'md-primary\' : \'\'">\n			            <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon>\n			          </md-button>\n			        </md-card-actions>\n			      </md-card>\n			    </div> --> <div ng-show="!loadingBar" class="searchedMoviesCardContainer animate-show-in" layout-wrap layout="row" layout-align="space-around center" data-images-loaded> <md-card class="searchedMoviesCard" ng-repeat="movie in allMovies | orderBy:\'popularity\':true"> <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="movie.backdrop_path" ng-src="https://image.tmdb.org/t/p/w780/{{movie.backdrop_path}}"> <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="!movie.backdrop_path" ng-src="https://www.youmagine.com/assets/placeholder-4232c9c79bc795997e7c7d4457b3725ee5f0fb55197114169a60a534105902fb.png"> <div ng-show="moviesCurrentlyUpdated.has(movie.id)" class="progressContainer"> <div class="searchMoviesBackdropPath loadingSearchMoviesCard"> <md-progress-circular class="progressCircularSearchMoviesCard" md-mode="indeterminate"></md-progress-circular> </div> </div> <md-card-actions layout="row" layout-align="start center"> <div layout="column" flex="70"> <span class="headline">{{movie.title}} <span ng-if="movie.release_date">({{movie.release_date | limitTo:4}})</span></span> <span class="subline">{{movie.vote_average}} <span style="font-size: 16px">★</span></span> </div> <span flex></span> <md-button md-theme="blueTheme" flex="none" ng-click="evaluateMovies(movie.id, 1)" class="md-icon-button" aria-label="like" ng-class="moviesEvaluation.get(movie.id.toString()) === 1 ? \'md-primary\' : \'\'" ng-disabled="moviesCurrentlyUpdated.has(movie.id)"> <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon> </md-button> <md-button md-theme="redTheme" flex="none" ng-click="evaluateMovies(movie.id, 0)" class="md-icon-button" aria-label="dislike" ng-class="moviesEvaluation.get(movie.id.toString()) === 0 ? \'md-primary\' : \'\'" ng-disabled="moviesCurrentlyUpdated.has(movie.id)"> <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon> </md-button> </md-card-actions> </md-card> </div> <cl-paging ng-show="(moviesEvaluation.size > 0) && !loadingBar" flex cl-pages="paging.total" cl-steps="6" cl-align="center center" cl-current-page="paging.current"></cl-paging> </md-tab-body> </md-tab> <md-tab> <md-tab-label><md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon></md-tab-label> <md-tab-body class="md-padding"> <h1 class="md-display-2">Films aimés</h1> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla venenatis ante augue. Phasellus volutpat neque ac dui mattis vulputate. Etiam consequat aliquam cursus. In sodales pretium ultrices. Maecenas lectus est, sollicitudin consectetur felis nec, feugiat ultricies mi. Aliquam erat volutpat. Nam placerat, tortor in ultrices porttitor, orci enim rutrum enim, vel tempor sapien arcu a tellus. Vivamus convallis sodales ante varius gravida. Curabitur a purus vel augue ultrices ultricies id a nisl. Nullam malesuada consequat diam, a facilisis tortor volutpat et. Sed urna dolor, aliquet vitae posuere vulputate, euismod ac lorem. Sed felis risus, pulvinar at interdum quis, vehicula sed odio. Phasellus in enim venenatis, iaculis tortor eu, bibendum ante. Donec ac tellus dictum neque volutpat blandit. Praesent efficitur faucibus risus, ac auctor purus porttitor vitae. Phasellus ornare dui nec orci posuere, nec luctus mauris semper.</p> </md-tab-body> </md-tab> <md-tab> <md-tab-label><md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon></md-tab-label> <md-tab-body class="md-padding"> <h1 class="md-display-2">Films non aimés</h1> <p>Integer turpis erat, porttitor vitae mi faucibus, laoreet interdum tellus. Curabitur posuere molestie dictum. Morbi eget congue risus, quis rhoncus quam. Suspendisse vitae hendrerit erat, at posuere mi. Cras eu fermentum nunc. Sed id ante eu orci commodo volutpat non ac est. Praesent ligula diam, congue eu enim scelerisque, finibus commodo lectus.</p> </md-tab-body> </md-tab> </md-tabs> <md-card ng-if="moviesEvaluation && false" layout="row"> <!-- <img class="md-card-image" src="card-image.png" alt="image caption"> --> <md-list> <md-list-item class="md-2-line" ng-repeat="likedMovie in likedMovies | orderBy:\'popularity\':true"> <!-- <md-icon class="taskNotOk" md-svg-icon="alert:ic_error_24px" aria-label="task not ok icon"></md-icon> --> <img class="searchMoviesPosterPath" ng-if="likedMovie.poster_path" ng-src="https://image.tmdb.org/t/p/w92/{{likedMovie.poster_path}}"> <img class="searchMoviesPosterPath" ng-if="!likedMovie.poster_path" ng-src="http://school4schools.com/blog/wp-content/plugins/lightbox/images/No-image-found.jpg"> <div class="md-list-item-text compact"> <h3>{{likedMovie.title}}</h3> <p>{{likedMovie.vote_average}}/10</p> </div> <div layout="column"> <md-button ng-click="evaluateMovies(movieSearched.id, 1)" class="md-icon-button" aria-label="Favorite" flex="none" ng-class="moviesEvaluation.get(likedMovie.id.toString()) === 1 ? \'md-primary\' : \'\'"> <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon> </md-button> <span flex="grow"></span> <md-button ng-click="evaluateMovies(movieSearched.id, 0)" class="md-icon-button" aria-label="Favorite" flex="none" ng-class="moviesEvaluation.get(likedMovie.id.toString()) === 0 ? \'md-primary\' : \'\'"> <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon> </md-button> </div> <md-divider ng-if="!$last"></md-divider> </md-list-item> </md-list> <md-list> <md-list-item class="md-2-line" ng-repeat="dislikedMovie in dislikedMovies | orderBy:\'popularity\':true"> <!-- <md-icon class="taskNotOk" md-svg-icon="alert:ic_error_24px" aria-label="task not ok icon"></md-icon> --> <img class="searchMoviesPosterPath" ng-if="dislikedMovie.poster_path" ng-src="https://image.tmdb.org/t/p/w92/{{dislikedMovie.poster_path}}"> <img class="searchMoviesPosterPath" ng-if="!dislikedMovie.poster_path" ng-src="http://school4schools.com/blog/wp-content/plugins/lightbox/images/No-image-found.jpg"> <div class="md-list-item-text compact"> <h3>{{dislikedMovie.title}}</h3> <p>{{dislikedMovie.vote_average}}/10</p> </div> <div layout="column"> <md-button ng-click="evaluateMovies(movieSearched.id, 1)" class="md-icon-button" aria-label="Favorite" flex="none" ng-class="moviesEvaluation.get(dislikedMovie.id.toString()) === 1 ? \'md-primary\' : \'\'"> <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon> </md-button> <span flex="grow"></span> <md-button ng-click="evaluateMovies(movieSearched.id, 0)" class="md-icon-button" aria-label="Favorite" flex="none" ng-class="moviesEvaluation.get(dislikedMovie.id.toString()) === 0 ? \'md-primary\' : \'\'"> <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon> </md-button> </div> <md-divider ng-if="!$last"></md-divider> </md-list-item> </md-list> </md-card> </md-content> </div>'),a.put("views/credits.html",'<div layout-fill layout="column"> <!-- Main toolbar --> <md-toolbar class="md-whiteframe-z1 slideTopToBottom"> <div class="md-toolbar-tools"> <!-- Hamburger icon --> <md-button class="md-icon-button" ng-click="toggleSidenav(\'left\')" hide-gt-md aria-label="Menu"> <md-icon md-svg-icon="navigation:ic_menu_24px" aria-label="Menu"></md-icon> </md-button> <h3> Crédits </h3> <!-- <span flex></span>\n\n      \n      <md-button class="md-icon-button" aria-label="Search" ng-click="toggleSearch()">\n        <md-icon md-svg-icon="action:ic_search_24px" aria-label="Search"></md-icon>\n      </md-button>\n      <md-button class="md-icon-button" aria-label="Open Settings" ng-click="showListBottomSheet($event)">\n        <md-icon md-svg-icon="navigation:ic_more_vert_24px" aria-label="More"></md-icon>\n      </md-button> --> </div> </md-toolbar> <!-- Content --> <md-content layout-padding ng-cloak> <div class="searchedMoviesCardContainer animate-show-in" layout-wrap layout="row" layout-align="space-around center" data-images-loaded> <!-- <md-card>\n        <img ng-click="showMovieDetailsDialog($event, movieSearched.id)" class="searchMoviesBackdropPath" ng-if="!movieSearched.backdrop_path" ng-src="https://www.youmagine.com/assets/placeholder-4232c9c79bc795997e7c7d4457b3725ee5f0fb55197114169a60a534105902fb.png"/>\n        <md-card-content layout="row" layout-align="start center">\n          <div layout="column" flex="70">\n            <span class="headline"> Quentin Dunand</span>\n            <span class="subline">{{movieSearched.vote_average}} <span style="font-size: 16px">★</span></span>\n          </div>\n          <span flex></span>\n          <md-button flex="none" ng-click="evaluateMovies(movieSearched.id, 1)" class="md-icon-button" aria-label="like" ng-class="moviesEvaluation.get(movieSearched.id.toString()) === 1 ? \'md-primary\' : \'\'">\n            <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon>\n          </md-button>\n          <md-button md-theme="redTheme" flex="none" ng-click="evaluateMovies(movieSearched.id, 0)" class="md-icon-button" aria-label="dislike" ng-class="moviesEvaluation.get(movieSearched.id.toString()) === 0 ? \'md-primary\' : \'\'">\n            <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon>\n          </md-button>\n        </md-card-content>\n      </md-card> --> <md-card class="searchedMoviesCard"> <img class="creditsPersonalPhotos md-whiteframe-6dp" ng-src="https://media.licdn.com/mpr/mpr/shrinknp_200_200/AAEAAQAAAAAAAAJpAAAAJGQ1ZmIwOTIyLWNmMjQtNGU0Ny05YTRiLWI3MmM4YzBhMTU2YQ.jpg" class="md-card-image" alt="Profile photo"> <md-card-title> <md-card-title-text layout="column" layout-align="center center"> <span class="md-headline">Quentin Dunand</span> <span class="subline">Front-end developer </span> </md-card-title-text> </md-card-title> <md-card-content> <p> The titles of Washed Out\'s breakthrough song and the first single from Paracosm share the two most important words in Ernest Greene\'s musical language: feel it. It\'s a simple request, as well... </p> </md-card-content> </md-card> <md-card class="searchedMoviesCard"> <img class="creditsPersonalPhotos md-whiteframe-6dp" ng-src="https://media.licdn.com/mpr/mpr/shrinknp_200_200/AAEAAQAAAAAAAAeGAAAAJDEwNWFjMmJjLTMwNzgtNGFhMi1hMTRmLTZlYWU5MzFiMzY4Zg.jpg" class="md-card-image" alt="Profile photo"> <md-card-title> <md-card-title-text layout="column" layout-align="center center"> <span class="md-headline">Elsa Navarro</span> <span class="subline">Front-end developer </span> </md-card-title-text> </md-card-title> <md-card-content> <p> The titles of Washed Out\'s breakthrough song and the first single from Paracosm share the two most important words in Ernest Greene\'s musical language: feel it. It\'s a simple request, as well... </p> </md-card-content> </md-card> <md-card class="searchedMoviesCard"> <img class="creditsPersonalPhotos md-whiteframe-6dp" ng-src="https://www.wizbii.com/profile/julian-hattinguais/avatar/large@2x" class="md-card-image" alt="Profile photo"> <md-card-title> <md-card-title-text layout="column" layout-align="center center"> <span class="md-headline">Julian Hattinguais</span> <span class="subline">Front-end developer </span> </md-card-title-text> </md-card-title> <md-card-content> <p> The titles of Washed Out\'s breakthrough song and the first single from Paracosm share the two most important words in Ernest Greene\'s musical language: feel it. It\'s a simple request, as well... </p> </md-card-content> </md-card> <md-card class="searchedMoviesCard"> <img class="creditsPersonalPhotos md-whiteframe-6dp" ng-src="https://media.licdn.com/mpr/mpr/shrinknp_200_200/p/7/005/094/2d6/3c35a30.jpg" class="md-card-image" alt="Profile photo"> <md-card-title> <md-card-title-text layout="column" layout-align="center center"> <span class="md-headline">Coralie Rachex</span> <span class="subline">Front-end developer </span> </md-card-title-text> </md-card-title> <md-card-content> <p> The titles of Washed Out\'s breakthrough song and the first single from Paracosm share the two most important words in Ernest Greene\'s musical language: feel it. It\'s a simple request, as well... </p> </md-card-content> </md-card> <md-card class="searchedMoviesCard"> <img class="creditsPersonalPhotos md-whiteframe-6dp" ng-src="https://media.licdn.com/mpr/mpr/shrinknp_200_200/AAEAAQAAAAAAAAKhAAAAJDM2ZTFhMWQyLTU4ZWEtNGZiMy1hOTIzLTA1OTE0OTNlNDI1Ng.jpg" class="md-card-image" alt="Profile photo"> <md-card-title> <md-card-title-text layout="column" layout-align="center center"> <span class="md-headline">Edwin Niogret</span> <span class="subline">Front-end developer </span> </md-card-title-text> </md-card-title> <md-card-content> <p> The titles of Washed Out\'s breakthrough song and the first single from Paracosm share the two most important words in Ernest Greene\'s musical language: feel it. It\'s a simple request, as well... </p> </md-card-content> </md-card> </div> </md-content> </div>'),a.put("views/home.html",'<div ng-show="randomPopularMovie" class="presentationBackground animate-show" ng-style="{\'background-image\': randomPopularMovie ? \'url(https://image.tmdb.org/t/p/w1280/\'+randomPopularMovie.backdrop_path+\')\' : \'none\'}"></div> <div class="shade"></div> <div class="homeContent" layout-fill layout="column" ng-cloak layout-align="center center"> <!-- Content --> <div style="width: 50%; z-index: 5" layout-fill layout="column" layout-align="center center"> <div class="homeTitle" layout="row"> <img ng-src="images/deep_movies_logo_no_name.77d6e7f0.png" class="md-card-image logoHome" alt="logo deepMovies"> <h1 id="appNameHome"><span class="robotoLight">Deep</span><span class="pacifico">Movies</span></h1> </div> <h2>Enfin un système de suggestion de films intelligent basé sur <b>vos</b> goûts !</h2> <h3>En s\'appuyant sur l\'intelligence artificielle, notre système est capable de comprendre vos goûts afin de vous recommander des films qui vous conviennent</h3> <md-button ng-click="go(\'/signup\');" class="md-raised md-cornered md-primary">Créer un compte</md-button> <md-button ng-click="go(\'/login\');" class="md-raised md-cornered md-primary">Connectez-vous</md-button> <!-- <md-card class="slideBottomToTop" ng-show="!authenticated">\n      <img ng-src="images/deep_movies_logo.424d4472.png" class="md-card-image logoLogin" alt="logo deepMovies">\n      <form ng-submit="loginFunction()" name="loginForm" layout="column">\n        <md-card-content>\n          <md-input-container class="md-block">\n            <label>Nom d\'utilisateur</label>\n            <input required type="text" id="name" name="name" ng-model="user.name" md-autofocus>\n            <div ng-messages="loginForm.name.$error">\n              <div ng-message="required">Ce champ est requis</div>\n            </div>\n          </md-input-container>\n          <md-input-container class="md-block">\n            <label>Mot de passe</label>\n            <input required type="password" id="password" name="password" ng-model="user.password">\n            <div ng-messages="loginForm.password.$error">\n              <div ng-message="required">Ce champ est requis</div>\n            </div>\n          </md-input-container>\n          <md-progress-circular id="loadingLogin" ng-show="loading" md-mode="indeterminate"></md-progress-circular>\n        </md-card-content>\n        <md-card-actions layout="column" layout-align="center">\n          <md-button type="submit" ng-disabled="loginForm.$invalid" class="md-raised md-cornered md-primary">Se connecter</md-button>\n        </md-card-actions>\n      </form>\n    </md-card> --> </div> </div>'),a.put("views/improveaccuracy.html",'<div layout-fill layout="column"> <!-- Main toolbar --> <md-toolbar class="md-whiteframe-z1 slideTopToBottom"> <div class="md-toolbar-tools"> <!-- Hamburger icon --> <md-button class="md-icon-button" ng-click="toggleSidenav(\'left\')" hide-gt-md aria-label="Menu"> <md-icon md-svg-icon="navigation:ic_menu_24px" aria-label="Menu"></md-icon> </md-button> <h3> Améliorer mes prédictions </h3> <span flex></span> <!-- Search and menus icons --> <!-- <md-button class="md-icon-button" aria-label="Search" ng-click="toggleSearch()">\n        <md-icon md-svg-icon="action:ic_search_24px" aria-label="Search"></md-icon>\n      </md-button>\n      <md-button class="md-icon-button" aria-label="Open Settings" ng-click="showListBottomSheet($event)">\n        <md-icon md-svg-icon="navigation:ic_more_vert_24px" aria-label="More"></md-icon>\n      </md-button> --> <span class="countMovies"> {{countMovies().likedMovies}} <md-icon md-svg-icon="action:ic_thumb_up_24px" style="margin-right:15px"></md-icon> </span> <span class="countMovies"> {{countMovies().dislikedMovies}} <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon> </span> </div> </md-toolbar> <!-- Content --> <md-content layout-padding ng-cloak> <div ng-show="!loadingBar || firstLoad" layout="row" layout-align="center center" class="slideBottomToTop" layout-wrap> <!-- <span hide-xs hide-sm flex></span>    --> <!-- <md-card id="searchMovieCard" flex="50" layout="row">\n      </md-card> --> <form flex="70" ng-submit="searchMovieByName(nameSearchMovie)" name="searchMovieForm" layout="row"> <md-input-container layout-fill class="md-icon-float md-block"> <!-- Use floating label instead of placeholder --> <label>&nbsp;</label> <md-icon md-svg-icon="action:ic_search_24px" aria-label="movie search"></md-icon> <input style="font-size:22px; margin-bottom: -15px; margin-top: 5px" ng-model="nameSearchMovie" type="search" placeholder="Rechercher un film"> </md-input-container> <!-- <md-button ng-show="nameSearchMovie" ng-click="searchMovieByName(nameSearchMovie)" class="md-raised" aria-label="description" md-ripple-size="auto">Rechercher le film</md-button> --> </form> <div flex="none"> <md-button ng-click="discoverMovies()" class="md-raised" aria-label="description" md-ripple-size="auto"> <md-icon md-svg-icon="av:ic_shuffle_24px"></md-icon> </md-button> <md-button ng-disabled="globalPage <= 1" ng-click="discoverMovies(-1)" class="md-raised" aria-label="description" md-ripple-size="auto"> <md-icon md-svg-icon="image:ic_navigate_before_24px"></md-icon> </md-button> <md-button ng-disabled="globalPage >= 1000" ng-click="discoverMovies(1)" class="md-raised" aria-label="description" md-ripple-size="auto"> <md-icon md-svg-icon="image:ic_navigate_next_24px"></md-icon> </md-button> </div> <!-- <span hide-xs hide-sm flex></span> --> </div> <!-- <md-card>\n      <h1>Améliorer mes prédictions</h1>\n      <p>Ameliorez vos prédictions notant d\'autre films !</p>\n    \n\n\n    </md-card> --> <div ng-show="!loadingBar" class="searchedMoviesCardContainer animate-show-in" layout-wrap layout="row" layout-align="space-around center" data-images-loaded> <md-card class="searchedMoviesCard" ng-repeat="movieSearched in moviesSearched.results | orderBy:\'popularity\':true"> <img ng-click="showMovieDetailsDialog($event, movieSearched.id)" class="searchMoviesBackdropPath" ng-if="movieSearched.backdrop_path" ng-src="https://image.tmdb.org/t/p/w780/{{movieSearched.backdrop_path}}"> <img ng-click="showMovieDetailsDialog($event, movieSearched.id)" class="searchMoviesBackdropPath" ng-if="!movieSearched.backdrop_path" ng-src="https://www.youmagine.com/assets/placeholder-4232c9c79bc795997e7c7d4457b3725ee5f0fb55197114169a60a534105902fb.png"> <div ng-show="moviesCurrentlyUpdated.has(movieSearched.id)" class="progressContainer"> <div class="searchMoviesBackdropPath loadingSearchMoviesCard"> <md-progress-circular class="progressCircularSearchMoviesCard" md-mode="indeterminate"></md-progress-circular> </div> </div> <md-card-actions layout="row" layout-align="start center"> <div layout="column" flex="70"> <span class="headline">{{movieSearched.title}} <span ng-if="movieSearched.release_date">({{movieSearched.release_date | limitTo:4}})</span></span> <span class="subline">{{movieSearched.vote_average}} <span style="font-size: 16px">★</span></span> </div> <span flex></span> <md-button md-theme="blueTheme" flex="none" ng-click="evaluateMovies(movieSearched.id, 1)" class="md-icon-button" aria-label="like" ng-class="moviesEvaluation.get(movieSearched.id.toString()) === 1 ? \'md-primary\' : \'\'" ng-disabled="moviesCurrentlyUpdated.has(movieSearched.id)"> <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon> </md-button> <md-button md-theme="redTheme" flex="none" ng-click="evaluateMovies(movieSearched.id, 0)" class="md-icon-button" aria-label="dislike" ng-class="moviesEvaluation.get(movieSearched.id.toString()) === 0 ? \'md-primary\' : \'\'" ng-disabled="moviesCurrentlyUpdated.has(movieSearched.id)"> <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon> </md-button> </md-card-actions> </md-card> </div> <div ng-show="!loadingBar" id="bottomImproveAccuracyNavigation" layout="center center"> <md-button flex="none" ng-click="discoverMovies()" class="md-raised" aria-label="description" md-ripple-size="auto"> <md-icon md-svg-icon="av:ic_shuffle_24px"></md-icon> </md-button> <md-button flex="none" ng-disabled="globalPage <= 1" ng-click="discoverMovies(-1)" class="md-raised" aria-label="description" md-ripple-size="auto"> <md-icon md-svg-icon="image:ic_navigate_before_24px"></md-icon> </md-button> <md-button flex="none" ng-disabled="globalPage >= 1000" ng-click="discoverMovies(1)" class="md-raised" aria-label="description" md-ripple-size="auto"> <md-icon md-svg-icon="image:ic_navigate_next_24px"></md-icon> </md-button> </div> <md-card ng-show="moviesSearched && false"> <!-- <img class="md-card-image" src="card-image.png" alt="image caption"> --> <md-list> <md-list-item class="md-2-line" ng-repeat="movieSearched in moviesSearched.results | orderBy:\'popularity\':true"> <!-- <md-icon class="taskNotOk" md-svg-icon="alert:ic_error_24px" aria-label="task not ok icon"></md-icon> --> <img class="searchMoviesPosterPath" ng-if="movieSearched.poster_path" ng-src="https://image.tmdb.org/t/p/w92/{{movieSearched.poster_path}}"> <img class="searchMoviesPosterPath" ng-if="!movieSearched.poster_path" ng-src="http://school4schools.com/blog/wp-content/plugins/lightbox/images/No-image-found.jpg"> <div class="md-list-item-text compact"> <h3>{{movieSearched.title}}</h3> <p>{{movieSearched.vote_average}}/10</p> </div> <div layout="column"> <md-button ng-click="evaluateMovies(movieSearched.id, 1)" class="md-icon-button" aria-label="Favorite" flex="none" ng-class="moviesEvaluation.get(movieSearched.id.toString()) === 1 ? \'md-primary\' : \'\'"> <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon> </md-button> <span flex="grow"></span> <md-button ng-click="evaluateMovies(movieSearched.id, 0)" class="md-icon-button" aria-label="Favorite" flex="none" ng-class="moviesEvaluation.get(movieSearched.id.toString()) === 0 ? \'md-primary\' : \'\'"> <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon> </md-button> </div> <md-divider ng-if="!$last"></md-divider> </md-list-item> </md-list> </md-card> <!-- Image preloading --> <div id="preloaded-images"> <img ng-if="movie.poster_path" ng-repeat="movie in moviesSearched.results" ng-src="https://image.tmdb.org/t/p/w185/{{movie.poster_path}}" width="1" height="1" alt=""> </div> </md-content> </div>'),a.put("views/login.html",'<div layout-fill layout="column" ng-cloak layout-align="center center"> <!-- Content --> <div style="width: 50%" layout-fill> <md-card class="slideBottomToTop" ng-show="!authenticated"> <img ng-src="images/deep_movies_logo.424d4472.png" class="md-card-image logoLogin" alt="logo deepMovies"> <form ng-submit="loginFunction()" name="loginForm" layout="column"> <md-card-content> <md-input-container class="md-block"> <label>Nom d\'utilisateur</label> <input required type="text" id="name" name="name" ng-model="user.name" md-autofocus> <div ng-messages="loginForm.name.$error"> <div ng-message="required">Ce champ est requis</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Mot de passe</label> <input required type="password" id="password" name="password" ng-model="user.password"> <div ng-messages="loginForm.password.$error"> <div ng-message="required">Ce champ est requis</div> </div> </md-input-container> <!-- <md-input-container class="md-block">\n            <md-checkbox ng-model="rememberme" aria-label="Checkbox">\n              Rester connecté\n            </md-checkbox>\n          </md-input-container> --> <md-progress-circular id="loadingLogin" ng-show="loading" md-mode="indeterminate"></md-progress-circular> </md-card-content> <md-card-actions layout="column" layout-align="center"> <md-button type="submit" ng-disabled="loginForm.$invalid" class="md-raised md-cornered md-primary">Se connecter</md-button> </md-card-actions> </form> </md-card> </div> </div>'),
a.put("views/main.html",'<div layout-fill layout="column"> <!-- Main toolbar --> <md-toolbar class="md-whiteframe-z1 slideTopToBottom"> <div class="md-toolbar-tools"> <!-- Hamburger icon --> <md-button class="md-icon-button" ng-click="toggleSidenav(\'left\')" hide-gt-md aria-label="Menu"> <md-icon md-svg-icon="navigation:ic_menu_24px" aria-label="Menu"></md-icon> </md-button> <h3> <span class="robotoLight">Deep</span><span class="pacifico">Movies</span><sup>®</sup> </h3> <span flex></span> <!-- Search and menus icons --> <!-- <md-button class="md-icon-button" aria-label="Search" ng-click="toggleSearch()">\n        <md-icon md-svg-icon="action:ic_search_24px" aria-label="Search"></md-icon>\n      </md-button>\n      <md-button class="md-icon-button" aria-label="Open Settings" ng-click="showListBottomSheet($event)">\n        <md-icon md-svg-icon="navigation:ic_more_vert_24px" aria-label="More"></md-icon>\n      </md-button> --> </div> </md-toolbar> <!-- Content --> <md-content layout-padding ng-cloak> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Bienvenue jeune padawan !</b></span> <span class="md-subhead">Annotez des films pour permettre au système de déterminer vos goûts !</span> </md-card-title-text> </md-card-title> <md-card-content> <p> Rendez-vous dans la <b>page "Améliorer mes prédictions"</b> et annotez des films en cliquant sur les petits pouces. Le <b>"thumb up" bleu indique que vous aimez ce film</b>, le <b>"thumb down" rouge indique lui que vous n\'aimez pas celui-ci</b> (ou que vous ne souhaitez pas le voir). </p> <p> Après avoir annoté vos films, vous pouvez <b>exporter vos résultats</b> en vous rendant sur la <b>page "Accueil"</b> puis en cliquant sur le <b>bouton "Enregistrer mes annotations"</b>. </p> <p> Pour poursuivre votre annotation de films, vous pouvez <b>importer vos précédentes</b> annotations depuis la <b>page "Accueil"</b> en sélectionnant votre fichier puis en <b>cliquant sur "Importez vos préférences"</b>. </p> <p><b>ATTENTION: Ne rechargez pas la page ! Actuellement, un refresh de celle-ci vous fait perdre toutes vos données que vous n\'avez pas sauvegardées !</b> Sauvegardez régulièrement et surtout naviguez à travers les pages grâce aux menus du site <span style="font-size: 20px">☺</span></p> </md-card-content> </md-card> <!-- <md-card>\n      <md-card-title>\n        <md-card-title-text>\n          <span class="md-headline"><b>Importez ou exportez vos préférences</b></span>\n          <span class="md-subhead">Améliorez vos prédictions en notant d\'autres films !</span>\n        </md-card-title-text>\n      </md-card-title>\n      <md-card-content>\n        <div><b>Uploader vos films déjà annotés</b></div>\n        <input id="preferences" type="file">\n        <md-button ng-click="uploadFiles()" class="md-raised" aria-label="description" md-ripple-size="auto">Importez vos préférences</md-button>\n\n        <md-button ng-click="saveToPc(moviesEvaluation, \'moviesEvaluated.json\')" class="md-raised" aria-label="description" md-ripple-size="auto">Enregistrer mes annotations</md-button>\n      </md-card-content>\n\n      \n    </md-card> --> </md-content> </div>'),a.put("views/moviedetailsdialog.html",'<md-dialog flex="80" id="movieDetailsDialog" aria-label="Détails du film"> <!-- <md-toolbar>\n    <div class="md-toolbar-tools">\n      <h2>\n        {{movieDetails.title}}\n      </h2>\n      <span flex></span>\n      <md-button class="md-icon-button" ng-click="cancel()">\n        <md-icon md-svg-src="navigation:ic_close_24px" aria-label="Close dialog"></md-icon>\n      </md-button>\n    </div>\n  </md-toolbar> --> <md-button class="close_button md-icon-button" ng-click="cancel()"> <md-icon md-svg-src="navigation:ic_close_24px" aria-label="Close dialog"></md-icon> </md-button> <!-- <img class="movieDetailsBackdropPath" ng-if="movieDetails.backdrop_path" ng-src="https://image.tmdb.org/t/p/w780/{{movieDetails.backdrop_path}}"/>\n  <img class="movieDetailsBackdropPath" ng-if="!movieDetails.backdrop_path" ng-src="https://www.youmagine.com/assets/placeholder-4232c9c79bc795997e7c7d4457b3725ee5f0fb55197114169a60a534105902fb.png"/> --> <div ng-if="movieDetails.backdrop_path" id="headerimage" ng-style="{\'background-image\':\'url(https://image.tmdb.org/t/p/w780/\'+movieDetails.backdrop_path+\')\'}"></div> <div ng-if="!movieDetails.backdrop_path" id="headerimage"></div> <div layout="column" id="movieFloatingInfo"> <h2 class="headline" id="movieTitle"> {{movieDetails.title}} <span ng-if="movieDetails.release_date">({{movieDetails.release_date | limitTo:4}})</span> </h2> <span ng-if="movieDetails.tagline" class="subline">{{movieDetails.tagline}}</span> <!-- <span class="subline"><span ng-repeat="genre in movieDetails.genres">{{genre.name}}<span ng-if="!$last">, </span></span></span> --> <span class="subline">{{movieDetails.vote_average}} <span style="font-size: 16px">★</span></span> <md-chips ng-model="movieDetails.genres" readonly md-removable="false"> <md-chip-template> {{$chip.name}} </md-chip-template> </md-chips> </div> <div id="moviePoster"> <img md-whiteframe="8" ng-if="movieDetails.poster_path" ng-src="https://image.tmdb.org/t/p/w185/{{movieDetails.poster_path}}"> <img style="width: 185px" md-whiteframe="8" ng-if="!movieDetails.poster_path" ng-src="http://school4schools.com/blog/wp-content/plugins/lightbox/images/No-image-found.jpg"> </div> <md-dialog-content id="movieDialogContent"> <div id="wrapper" layout="row"> <div id="movieDetails" class="md-padding"> <!-- <h2>Synopsis</h2> --> <p ng-if="movieDetails.overview">{{movieDetails.overview}}</p> <p ng-if="!movieDetails.overview">Aucun résumé n\'est disponible pour ce film</p> </div> </div> </md-dialog-content> <!-- <md-dialog-actions>\n		<span flex></span>\n		<md-button ng-click="cancel()"> Annuler </md-button>\n		<md-button ng-disabled="addAssignmentForm.$invalid" ng-click="editAssignmentChild(assignInfos)" class="md-primary"> Enregistrer </md-button>\n	</md-dialog-actions> --> </md-dialog>'),a.put("views/recommendations.html",'<div layout-fill layout="column"> <!-- Main toolbar --> <md-toolbar class="md-whiteframe-z1 slideTopToBottom"> <div class="md-toolbar-tools"> <!-- Hamburger icon --> <md-button class="md-icon-button" ng-click="toggleSidenav(\'left\')" hide-gt-md aria-label="Menu"> <md-icon md-svg-icon="navigation:ic_menu_24px" aria-label="Menu"></md-icon> </md-button> <h3> Mes recommandations </h3> <span flex></span> <!-- Search and menus icons --> <md-button class="md-icon-button" aria-label="Search" ng-click="testIdFunction()"> <md-icon md-svg-icon="action:ic_search_24px" aria-label="Search"></md-icon> </md-button> <md-button class="md-icon-button" aria-label="Open Settings" ng-click="showListBottomSheet($event)"> <md-icon md-svg-icon="navigation:ic_more_vert_24px" aria-label="More"></md-icon> </md-button> </div> </md-toolbar> <!-- Content --> <md-content layout-padding ng-cloak> <md-tabs md-dynamic-height md-border-bottom> <md-tab label="Parce que les autres ont aimé..."> <md-content class="md-padding"> <md-card ng-show="!moviesEvaluation.size && !loadingBar"> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Aucune donnée disponible</b></span> <span class="md-subhead">Vous n\'avez annoté aucun film, rendez-vous dans la catégorie "Améliorer mes prédictions" <span style="font-size: 20px">☺</span></span> </md-card-title-text> </md-card-title> </md-card> <md-card ng-show="loadingPredictionsFM"> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Vos prédictions sont en cours de chargement</b></span> <span class="md-subhead">Revenez dans quelques instants</span> </md-card-title-text> </md-card-title> <!-- <md-card-content>\n			        <p>\n			          Rendez-vous dans la <b>page "Améliorer mes prédictions"</b> et annotez des films en cliquant sur les petits pouces.\n			          Le <b>"thumb up" bleu indique que vous aimez ce film</b>, le <b>"thumb down" rouge indique lui que vous n\'aimez pas celui-ci</b> (ou que vous ne souhaitez pas le voir). \n			        </p>\n			      </md-card-content> --> </md-card> <div ng-show="!loadingPredictionsFM" class="searchedMoviesCardContainer animate-show-in" layout-wrap layout="row" layout-align="space-around center" data-images-loaded> <md-card class="searchedMoviesCard" ng-repeat="movie in allMovies | orderBy:\'accuracy\':true"> <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="movie.backdrop_path" ng-src="https://image.tmdb.org/t/p/w780/{{movie.backdrop_path}}"> <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="!movie.backdrop_path" ng-src="https://www.youmagine.com/assets/placeholder-4232c9c79bc795997e7c7d4457b3725ee5f0fb55197114169a60a534105902fb.png"> <div class="sentimentAnalysis" layout="row" layout-align="end start"> <md-button ng-if="popularity[movie.id].pop * Math.max(1, movie.popularity) > 200" md-theme="blueTheme" flex="none" class="md-fab md-mini md-primary" aria-label="popular on twitter"> <md-tooltip>On en parle sur Twitter {{popularity[movie.id].pop}} tweets</md-tooltip> <md-icon md-svg-icon="toggle:ic_star_24px"></md-icon> </md-button> <md-button ng-if="popularity[movie.id].sentiment > 0.5" md-theme="redTheme" flex="none" class="md-fab md-mini md-primary" aria-label="liked on twitter"> <md-tooltip>Coup de coeur Twitter !</md-tooltip> <md-icon md-svg-icon="action:ic_favorite_24px"></md-icon> </md-button> </div> <div ng-show="moviesCurrentlyUpdated.has(movie.id)" class="progressContainer"> <div class="searchMoviesBackdropPath loadingSearchMoviesCard"> <md-progress-circular class="progressCircularSearchMoviesCard" md-mode="indeterminate"></md-progress-circular> </div> </div> <md-card-actions layout="row" layout-align="start center"> <div layout="column" flex="70"> <span class="headline">{{movie.title}} <span ng-if="movie.release_date">({{movie.release_date | limitTo:4}})</span></span> <span class="subline">{{movie.vote_average}} <span style="font-size: 16px">★</span> - {{predictionsFM[movie.id]*100 | number:0}}%</span> </div> <span flex></span> <md-button md-theme="blueTheme" flex="none" ng-click="evaluateMovies(movie.id, 1)" class="md-icon-button" aria-label="like" ng-class="moviesEvaluation.get(movie.id.toString()) === 1 ? \'md-primary\' : \'\'" ng-disabled="moviesCurrentlyUpdated.has(movie.id)"> <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon> </md-button> <md-button md-theme="redTheme" flex="none" ng-click="evaluateMovies(movie.id, 0)" class="md-icon-button" aria-label="dislike" ng-class="moviesEvaluation.get(movie.id.toString()) === 0 ? \'md-primary\' : \'\'" ng-disabled="moviesCurrentlyUpdated.has(movie.id)"> <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon> </md-button> </md-card-actions> </md-card> </div> </md-content> </md-tab> <md-tab label="Découvertes"> <md-content class="md-padding"> <md-card ng-show="loadingPredictionsFirstClassifier"> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Vos prédictions sont en cours de chargement</b></span> <span class="md-subhead">Revenez dans quelques instants</span> </md-card-title-text> </md-card-title> <!-- <md-card-content>\n			        <p>\n			          Rendez-vous dans la <b>page "Améliorer mes prédictions"</b> et annotez des films en cliquant sur les petits pouces.\n			          Le <b>"thumb up" bleu indique que vous aimez ce film</b>, le <b>"thumb down" rouge indique lui que vous n\'aimez pas celui-ci</b> (ou que vous ne souhaitez pas le voir). \n			        </p>\n			      </md-card-content> --> </md-card> <div ng-show="!loadingBar" class="searchedMoviesCardContainer animate-show-in" layout-wrap layout="row" layout-align="space-around center" data-images-loaded> <md-card class="searchedMoviesCard" ng-repeat="movie in predictions | orderBy:\'accuracy\':true"> <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="movie.backdrop_path" ng-src="https://image.tmdb.org/t/p/w780/{{movie.backdrop_path}}"> <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="!movie.backdrop_path" ng-src="https://www.youmagine.com/assets/placeholder-4232c9c79bc795997e7c7d4457b3725ee5f0fb55197114169a60a534105902fb.png"> <div class="sentimentAnalysis" layout="row" layout-align="end start"> <md-button ng-if="popularity[movie.id].pop * Math.max(1, movie.popularity) > 200" md-theme="blueTheme" flex="none" class="md-fab md-mini md-primary" aria-label="popular on twitter"> <md-tooltip>On en parle sur Twitter {{popularity[movie.id].pop}} tweets</md-tooltip> <md-icon md-svg-icon="toggle:ic_star_24px"></md-icon> </md-button> <md-button ng-if="popularity[movie.id].sentiment > 0.5" md-theme="redTheme" flex="none" class="md-fab md-mini md-primary" aria-label="liked on twitter"> <md-tooltip>Coup de coeur Twitter !</md-tooltip> <md-icon md-svg-icon="action:ic_favorite_24px"></md-icon> </md-button> </div> <div ng-show="moviesCurrentlyUpdated.has(movie.id)" class="progressContainer"> <div class="searchMoviesBackdropPath loadingSearchMoviesCard"> <md-progress-circular class="progressCircularSearchMoviesCard" md-mode="indeterminate"></md-progress-circular> </div> </div> <md-card-actions layout="row" layout-align="start center"> <div layout="column" flex="70"> <span class="headline">{{movie.title}} <span ng-if="movie.release_date">({{movie.release_date | limitTo:4}})</span></span> <span class="subline">{{movie.vote_average}} <span style="font-size: 16px">★</span> - {{movie.accuracy*100 | number:0}}%</span> </div> <span flex></span> <md-button md-theme="blueTheme" flex="none" ng-click="evaluateMovies(movie.id, 1)" class="md-icon-button" aria-label="like" ng-class="moviesEvaluation.get(movie.id.toString()) === 1 ? \'md-primary\' : \'\'" ng-disabled="moviesCurrentlyUpdated.has(movie.id)"> <md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon> </md-button> <md-button md-theme="redTheme" flex="none" ng-click="evaluateMovies(movie.id, 0)" class="md-icon-button" aria-label="dislike" ng-class="moviesEvaluation.get(movie.id.toString()) === 0 ? \'md-primary\' : \'\'" ng-disabled="moviesCurrentlyUpdated.has(movie.id)"> <md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon> </md-button> </md-card-actions> </md-card> </div> </md-content> </md-tab> </md-tabs> <!--  <md-subheader class="md-primary">Affichage 2</md-subheader>\n\n    <md-grid-list md-cols="2" md-cols-sm="3" md-cols-md="4" md-cols-gt-md="5" md-row-height="780:439" md-gutter="8px" md-gutter-gt-sm="4px" data-images-loaded>\n\n	    <md-grid-tile ng-repeat="movie in predictions" \n	    	md-rowspan="{{computeWidth(movie.accuracy, 1, 2, minAccuracy, maxAccuracy)}}" md-colspan="{{computeWidth(movie.accuracy, 1, 2, minAccuracy, maxAccuracy)}}" \n	    	md-colspan-xs="1" md-colspan-xs="1" \n	    	md-rowspan-sm="{{computeWidth(movie.accuracy, 1, 3, minAccuracy, maxAccuracy)}}" md-colspan-sm="{{computeWidth(movie.accuracy, 1, 3, minAccuracy, maxAccuracy)}}"\n	    	md-rowspan-md="{{computeWidth(movie.accuracy, 1, 4, minAccuracy, maxAccuracy)}}" md-colspan-md="{{computeWidth(movie.accuracy, 1, 4, minAccuracy, maxAccuracy)}}"\n	    	md-rowspan-gt-md="{{computeWidth(movie.accuracy, 1, 5, minAccuracy, maxAccuracy)}}" md-colspan-gt-md="{{computeWidth(movie.accuracy, 1, 5, minAccuracy, maxAccuracy)}}">\n	      <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="movie.backdrop_path" ng-src="https://image.tmdb.org/t/p/w780/{{movie.backdrop_path}}" layout-fill/>\n        <img ng-click="showMovieDetailsDialog($event, movie.id)" class="searchMoviesBackdropPath" ng-if="!movie.backdrop_path" ng-src="https://www.youmagine.com/assets/placeholder-4232c9c79bc795997e7c7d4457b3725ee5f0fb55197114169a60a534105902fb.png"/>\n	      <md-grid-tile-footer><h3>{{movie.title}}</h3></md-grid-tile-footer>\n	    </md-grid-tile>\n	  </md-grid-list> --> <!-- Image preloading --> <div id="preloaded-images"> <img ng-if="movie.poster_path" ng-repeat="movie in predictions" ng-src="https://image.tmdb.org/t/p/w185/{{movie.poster_path}}" width="1" height="1" alt=""> </div> </md-content> </div>'),a.put("views/settings.html",'<div layout-fill layout="column"> <!-- Main toolbar --> <md-toolbar class="md-whiteframe-z1 slideTopToBottom"> <div class="md-toolbar-tools"> <!-- Hamburger icon --> <md-button class="md-icon-button" ng-click="toggleSidenav(\'left\')" hide-gt-md aria-label="Menu"> <md-icon md-svg-icon="navigation:ic_menu_24px" aria-label="Menu"></md-icon> </md-button> <h3> Paramètres </h3> <span flex></span> <!-- Search and menus icons --> <md-button class="md-icon-button" aria-label="Search" ng-click="toggleSearch()"> <md-icon md-svg-icon="action:ic_search_24px" aria-label="Search"></md-icon> </md-button> <md-button class="md-icon-button" aria-label="Open Settings" ng-click="showListBottomSheet($event)"> <md-icon md-svg-icon="navigation:ic_more_vert_24px" aria-label="More"></md-icon> </md-button> </div> </md-toolbar> <!-- Content --> <md-content layout-padding ng-cloak> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Importez ou exportez vos préférences</b></span> <span class="md-subhead">Améliorez vos prédictions en notant d\'autres films !</span> </md-card-title-text> </md-card-title> <md-card-content> <!-- <label for="preferences" class="md-button md-raised md-primary">Uploader vos films déja annotés</label>\n        <input type="file" id="preferences"> --> <!--  <input class="ng-hide" id="input-file-id" multiple type="file" />\n        <label for="input-file-id" class="md-button md-raised md-primary">Choose Files</label> --> <div><b>Uploadez vos films déjà annotés</b></div> <input id="preferences" type="file"> <!-- <md-input-container>\n          <label>&nbsp;</label>\n          <input id="preferences" type="file">\n        </md-input-container> --> <md-button ng-click="uploadFiles()" class="md-raised" aria-label="description" md-ripple-size="auto">Importez vos préférences</md-button> <md-button ng-click="saveToPc(moviesEvaluation, \'moviesEvaluated.json\')" class="md-raised" aria-label="description" md-ripple-size="auto">Enregistrer mes annotations</md-button> </md-card-content> </md-card> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Enregistrez vos préférences en ligne !</b></span> <span class="md-subhead">Si vous avez utilisé notre application en version bêta, importez vos anciennes préférences !</span> </md-card-title-text> </md-card-title> <md-card-content> <!-- <label for="preferences" class="md-button md-raised md-primary">Uploader vos films déja annotés</label>\n        <input type="file" id="preferences"> --> <!--  <input class="ng-hide" id="input-file-id" multiple type="file" />\n        <label for="input-file-id" class="md-button md-raised md-primary">Choose Files</label> --> <div><b>Uploadez vos anciennes préférences</b></div> <input id="preferencesToDB" type="file"> <!-- <md-input-container>\n          <label>&nbsp;</label>\n          <input id="preferences" type="file">\n        </md-input-container> --> <md-button ng-click="uploadPreferencesToDB()" class="md-raised" aria-label="description" md-ripple-size="auto">Importez vos préférences</md-button> </md-card-content> </md-card> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Supprimer le cache de l\'application</b></span> <span class="md-subhead">Si vous remarquez des incohérences dans l\'affichage de certaines informations, supprimer le cache de l\'application afin de le mettre à jour en le reconstruisant</span> </md-card-title-text> </md-card-title> <md-card-content> <!-- <label for="preferences" class="md-button md-raised md-primary">Uploader vos films déja annotés</label>\n        <input type="file" id="preferences"> --> <!--  <input class="ng-hide" id="input-file-id" multiple type="file" />\n        <label for="input-file-id" class="md-button md-raised md-primary">Choose Files</label> --> <md-button ng-click="deleteLocalStorage()" class="md-raised" aria-label="supprimer le cache" md-ripple-size="auto">Supprimer le cache</md-button> <!-- <md-input-container>\n          <label>&nbsp;</label>\n          <input id="preferences" type="file">\n        </md-input-container> --> </md-card-content> </md-card> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Mettre à jour le modèle de prédiction</b></span> <span class="md-subhead">Si vous trouvez que le système de prédiction n\'est pas très efficace malgré le fait que vous avez annoté de nombreux films, vous pouvez tenter de forcer une mise à jour de votre modèle afin d\'obtenir des prédictions plus pertinentes</span> </md-card-title-text> </md-card-title> <md-card-content> <!-- <label for="preferences" class="md-button md-raised md-primary">Uploader vos films déja annotés</label>\n        <input type="file" id="preferences"> --> <!--  <input class="ng-hide" id="input-file-id" multiple type="file" />\n        <label for="input-file-id" class="md-button md-raised md-primary">Choose Files</label> --> <md-button ng-click="trainModel()" class="md-raised" aria-label="mettre à jour le modèle de prédiction" md-ripple-size="auto">Mettre à jour le modèle de prédiction</md-button> <!-- <md-input-container>\n          <label>&nbsp;</label>\n          <input id="preferences" type="file">\n        </md-input-container> --> </md-card-content> </md-card> </md-content> </div>'),a.put("views/signup.html",'<md-content layout-fill layout="row" ng-cloak layout-align="center center"> <!-- Content --> <div flex-gt-sm="50"> <md-card class="slideBottomToTop"> <img ng-src="images/deep_movies_logo.424d4472.png" class="md-card-image logoLogin" alt="logo deepMovies"> <form ng-submit="signupFunction()" name="signupForm" layout="column"> <md-card-content> <md-input-container class="md-block"> <label>Nom d\'utilisateur</label> <input required type="text" id="name" name="name" ng-model="user.name" md-autofocus> <div ng-messages="signupForm.name.$error"> <div ng-message="required">Ce champ est obligatoire</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Adresse email</label> <input required type="email" id="email" name="email" ng-model="user.email" ng-pattern="/^.+@.+\\..+$/"> <div ng-messages="signupForm.email.$error"> <div ng-message="required">Ce champ est obligatoire</div> <div ng-message="pattern">Vous devez saisir une adresse email valide ! (exemple: john@smith.com)</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Mot de passe</label> <input required type="password" id="password" name="password" ng-model="user.password"> <div ng-messages="signupForm.password.$error"> <div ng-message="required">Ce champ est obligatoire</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Confirmer votre mot de passe</label> <input password-match="user.password" required type="password" id="confirmPassword" name="confirmPassword" ng-model="confirmPassword"> <div ng-messages="signupForm.confirmPassword.$error"> <div ng-message="required">Ce champ est obligatoire</div> <div ng-message="compareTo">Vous n\'avez pas saisi deux fois le même mot de passe</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Date de naissance</label> <md-datepicker required ng-model="user.birthday" name="birthday" md-placeholder="Date de naissance" md-current-view="year" md-max-date="maxDate"></md-datepicker> <div ng-messages="signupForm.birthday.$error"> <div ng-message="valid">La valeur que vous avez saisi n\'est pas une date valide !</div> <div ng-message="required">La date de naissance est obligatoire !</div> <div ng-message="mindate">Cette date est trop ancienne !</div> <div ng-message="maxdate">De retour du futur McFly ?</div> </div> </md-input-container> <md-input-container class="md-block md-input-has-value"> <label style="margin-bottom: 10px">Sexe *</label> <md-radio-group ng-model="user.sex" required ng-required="true" name="sex"> <md-radio-button value="H" class="md-primary">Homme</md-radio-button> <md-radio-button value="F"> Femme </md-radio-button> </md-radio-group> <div ng-messages="signupForm.sex.$error"> <div ng-message="required">Ce champ est obligatoire !</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Catégorie socioprofessionnelle </label> <md-select required name="occupation" ng-model="user.occupation"> <md-option ng-repeat="occupation in occupations" ng-value="occupation"> {{occupation | capitalize}} </md-option> </md-select> <div ng-messages="signupForm.occupation.$error"> <div ng-message="required">Ce champ est obligatoire !</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Pays</label> <md-select required name="country" ng-model="user.country"> <md-option ng-repeat="country in countries | orderByWithAccent" ng-value="country"> {{country | capitalize}} </md-option> </md-select> <div ng-messages="signupForm.country.$error"> <div ng-message="required">Ce champ est obligatoire !</div> </div> </md-input-container> <!-- <div flex-gt-xs>\n			      <h4>Date de naissance</h4>\n			      <md-datepicker ng-model="user.birthday" md-placeholder="Date de naissance" md-current-view="year" md-max-date="maxDate"></md-datepicker>\n			    </div> --> <!-- <md-input-container class="md-block">\n            <md-checkbox ng-model="rememberme" aria-label="Checkbox">\n              Rester connecté\n            </md-checkbox>\n          </md-input-container> --> <md-progress-circular id="loadingSignup" ng-show="loading" md-mode="indeterminate"></md-progress-circular> <p>En cliquant sur Inscription, vous acceptez nos conditions d\'utilisation et indiquez que vous avez lu notre Politique d’utilisation des données.</p> </md-card-content> <md-card-actions layout="column" layout-align="center"> <md-button type="submit" ng-disabled="signupForm.$invalid" class="md-raised md-cornered md-primary">Inscription</md-button> <!-- <md-button ng-click="log(user)" class="md-raised md-cornered md-primary">Log</md-button> --> </md-card-actions> </form> </md-card> </div> </md-content>'),a.put("views/stats.html",'<div layout-fill layout="column"> <!-- Main toolbar --> <md-toolbar class="md-whiteframe-z1 slideTopToBottom"> <div class="md-toolbar-tools"> <!-- Hamburger icon --> <md-button class="md-icon-button" ng-click="toggleSidenav(\'left\')" hide-gt-md aria-label="Menu"> <md-icon md-svg-icon="navigation:ic_menu_24px" aria-label="Menu"></md-icon> </md-button> <h3> Mes Statistiques </h3> <span flex></span> <!-- Search and menus icons --> <md-button class="md-icon-button" aria-label="Search" ng-click="addMovieToDB({id:374080,liked:1})"> <md-icon md-svg-icon="action:ic_search_24px" aria-label="Search"></md-icon> </md-button> <md-button class="md-icon-button" aria-label="Open Settings" ng-click="deleteLS()"> <md-icon md-svg-icon="navigation:ic_more_vert_24px" aria-label="More"></md-icon> </md-button> </div> </md-toolbar> <!-- Content --> <md-content layout-padding ng-cloak> <!--<md-card ng-show="allMovies.length">\n    	<md-card-content>\n    		<h2>Mes Statistiques</h2>\n    		<div layout="row">\n    		<div flex>\n    				<h2>Films aimés</h2>\n    				<p ng-repeat="genre in genres">{{genre.name}}: {{(genresStatsLiked.get(genre.id)/likedMovies.length)*100  | number:0}}%</p>\n    		</div>\n    		<div flex>\n    				<h2>Films non aimés</h2>\n    				<p ng-repeat="genre in genres">{{genre.name}}: {{(genresStatsDisliked.get(genre.id)/dislikedMovies.length)*100  | number:0}}%</p>\n    		</div>\n    		</div>\n    	</md-card-content>\n    </md-card> --> <md-card ng-show="!statsAvailable && moviesEvaluation.size"> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Chargement en cours</b></span> <span class="md-subhead">Veuillez patientez...</span> </md-card-title-text> </md-card-title> <md-card-content> <p>Récupération des données depuis TMDB</p> <md-progress-linear md-mode="determinate" value="{{loadingTMDB}}"></md-progress-linear> <p>Traitement des données</p> <md-progress-linear md-mode="determinate" value="{{loadingProcessing}}"></md-progress-linear> </md-card-content> </md-card> <md-card ng-show="!moviesEvaluation.size && !loadingBar"> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Aucune donnée disponible</b></span> <span class="md-subhead">Vous n\'avez annoté aucun film, rendez-vous dans la catégorie "Améliorer mes prédictions" <span style="font-size: 20px">☺</span></span> </md-card-title-text> </md-card-title> </md-card> <md-tabs md-dynamic-height md-border-bottom ng-show="statsAvailable"> <!-- Tab liked movie --> <md-tab> <md-tab-label><md-icon md-svg-icon="action:ic_thumb_up_24px"></md-icon></md-tab-label> <md-tab-body class="md-padding"> <h1 class="md-display-2">Films aimés: {{likedMovies.length}}</h1> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Note moyenne</b></span> <span class="md-subhead">Statistiques sur la note moyenne des films que vous avez aimés</span> </md-card-title-text> </md-card-title> <md-card-content> <div class="textCenter" layout="row" layout-wrap layout-align="space-around center"> <p flex>Note moyenne: {{voteLikedStats.average | number:1}}</p> <p flex>Note médiane: {{voteLikedStats.median | number:1}}</p> </div> </md-card-content> </md-card> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Année de sortie</b></span> <span class="md-subhead">Statistiques sur l\'année de sortie des films que vous avez aimés</span> </md-card-title-text> </md-card-title> <md-card-content> <div class="textCenter" layout="row" layout-wrap layout-align="space-around center"> <p flex>Année de sortie moyenne: {{yearLikedStats.average | limitTo:4}}</p> <p flex>Année de sortie médiane: {{yearLikedStats.median | limitTo:4}}</p> </div> </md-card-content> </md-card> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Durée</b></span> <span class="md-subhead">Statistiques sur la durée des films que vous avez aimés</span> </md-card-title-text> </md-card-title> <md-card-content> <div class="textCenter" layout="row" layout-wrap layout-align="space-around center"> <p flex>Durée moyenne: {{runtimeLikedStats.average | number:0}} minutes</p> <p flex>Durée médiane: {{runtimeLikedStats.median | number:0}} minutes</p> </div> </md-card-content> </md-card> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Genres</b></span> <span class="md-subhead">Statistiques sur les genres des films que vous avez aimés. Les genres en <b>gras</b> sont ceux que vous semblez apprecier.</span> </md-card-title-text> </md-card-title> <md-card-content> <div class="textCenter" layout="row" layout-wrap layout-align="space-around center"> <p ng-repeat="genre in genres" flex="30"> <span ng-if="(genresStatsLiked.get(genre.id)/likedMovies.length)*100 <= (genresStatsDisliked.get(genre.id)/dislikedMovies.length)*100"> {{genre.name}}: {{(genresStatsLiked.get(genre.id)/likedMovies.length)*100 | number:0}}% </span> <span class="likedGenres" ng-if="(genresStatsLiked.get(genre.id)/likedMovies.length)*100 > (genresStatsDisliked.get(genre.id)/dislikedMovies.length)*100"> <b>{{genre.name}}: {{(genresStatsLiked.get(genre.id)/likedMovies.length)*100 | number:0}}%</b> </span> </p> </div> </md-card-content> </md-card> </md-tab-body> </md-tab> <!-- Tab disliked movie --> <md-tab> <md-tab-label><md-icon md-svg-icon="action:ic_thumb_down_24px"></md-icon></md-tab-label> <md-tab-body class="md-padding"> <h1 class="md-display-2">Films non aimés: {{dislikedMovies.length}}</h1> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Note moyenne</b></span> <span class="md-subhead">Statistiques sur la note moyenne des films que vous n\'avez pas aimés</span> </md-card-title-text> </md-card-title> <md-card-content> <div class="textCenter" layout="row" layout-wrap layout-align="space-around center"> <p flex>Note moyenne: {{voteDislikedStats.average | number:1}}</p> <p flex>Note médiane: {{voteDislikedStats.median | number:1}}</p> </div> </md-card-content> </md-card> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Année de sortie</b></span> <span class="md-subhead">Statistiques sur l\'année de sortie des films que vous n\'avez pas aimés</span> </md-card-title-text> </md-card-title> <md-card-content> <div class="textCenter" layout="row" layout-wrap layout-align="space-around center"> <p flex>Année de sortie moyenne: {{yearDislikedStats.average | limitTo:4}}</p> <p flex>Année de sortie médiane: {{yearDislikedStats.median | limitTo:4}}</p> </div> </md-card-content> </md-card> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Durée</b></span> <span class="md-subhead">Statistiques sur la durée des films que vous n\'avez pas aimés</span> </md-card-title-text> </md-card-title> <md-card-content> <div class="textCenter" layout="row" layout-wrap layout-align="space-around center"> <p flex="45">Durée moyenne: {{runtimeDislikedStats.average | number:0}} minutes</p> <p flex="45">Durée médiane: {{runtimeDislikedStats.median | number:0}} minutes</p> </div> </md-card-content> </md-card> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline"><b>Genres</b></span> <span class="md-subhead">Statistiques sur les genres des films que vous n\'avez pas aimés. Les genres en <b>gras</b> sont ceux que vous semblez ne pas apprecier.</span> </md-card-title-text> </md-card-title> <md-card-content> <div class="textCenter" layout="row" layout-wrap layout-align="space-around center"> <p ng-repeat="genre in genres" flex="30"> <span ng-if="(genresStatsLiked.get(genre.id)/likedMovies.length)*100 >= (genresStatsDisliked.get(genre.id)/dislikedMovies.length)*100"> {{genre.name}}: {{(genresStatsDisliked.get(genre.id)/dislikedMovies.length)*100 | number:0}}% </span> <span class="dislikedGenres" ng-if="(genresStatsLiked.get(genre.id)/likedMovies.length)*100 < (genresStatsDisliked.get(genre.id)/dislikedMovies.length)*100"> <b>{{genre.name}}: {{(genresStatsDisliked.get(genre.id)/dislikedMovies.length)*100 | number:0}}%</b> </span> </p> </div> </md-card-content> </md-card> </md-tab-body> </md-tab> <!-- Tab all movies --> <md-tab> <md-tab-label href="#allmovies">Tous les films</md-tab-label> <md-tab-body class="md-padding"> <h1 class="md-display-2">Tous mes films</h1> <div> <md-card id="barChartCard"> <canvas id="bar" class="chart chart-bar" chart-data="dataBarGraph" chart-labels="labelsBarGraph" chart-series="series"></canvas> </md-card> <md-card id="radarChartCard"> <canvas id="radar" class="chart chart-radar" chart-data="dataBarGraph" chart-options="options" chart-labels="labelsBarGraph"> </canvas> </md-card> </div> </md-tab-body> </md-tab> </md-tabs> </md-content> </div>');
}]);